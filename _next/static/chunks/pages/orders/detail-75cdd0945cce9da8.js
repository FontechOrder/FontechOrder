(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{26479:function(r,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orders/detail",function(){return n(32978)}])},32978:function(r,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Br}});var e=n(85893),i=n(67294),o=n(46199),a=n(94184),u=n.n(a),c=n(86886),s=n(83321),l=n(36822),f=n(41077),d=n(26447),p=n(50480),h=n(45843),m=n(67358),v=n(38895),y=n(15861),x=n(22797),b=n(92902),w=n(23508),g=n(34051),j=n.n(g),S=n(70301),Z=n(53298),I=function(r){return Z.O.from(r)},P=function(r){var t=r.databaseString,n=r.selectString;return I(t).select(n)};function k(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}var O=function(){var r,t=(r=j().mark((function r(t){var n,e,i,o,a;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.databaseString,e=t.selectString,r.next=3,P({databaseString:n,selectString:e});case 3:if(i=r.sent,o=i.data,!(a=i.error)){r.next=8;break}throw a;case 8:if(o){r.next=10;break}throw new Error("no data");case 10:return r.abrupt("return",o);case 11:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){k(o,e,i,a,u,"next",r)}function u(r){k(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}();function A(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}!function(){var r,t=(r=j().mark((function r(){return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O({databaseString:"orders"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){A(o,e,i,a,u,"next",r)}function u(r){A(o,e,i,a,u,"throw",r)}a(void 0)}))})}();function _(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}!function(){var r,t=(r=j().mark((function r(){return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O({databaseString:"restaurants"});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){_(o,e,i,a,u,"next",r)}function u(r){_(o,e,i,a,u,"throw",r)}a(void 0)}))})}();function C(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}var E=function(){var r,t=(r=j().mark((function r(t){var n,e,i,o,a,u,c,s,l,f;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.databaseString,e=t.selectString,i=t.notNullString,o=void 0===i?"id":i,a=t.eqs,0!==(u=void 0===a?[]:a).length){r.next=3;break}throw new Error("Invalid id");case 3:return c=u.reduce((function(r,t){return r.eq(t.eqString,t.id)}),P({databaseString:n,selectString:e})),r.next=6,c.not(o,"is","null").limit(1).single();case 6:if(s=r.sent,l=s.data,!(f=s.error)){r.next=11;break}throw f;case 11:if(l){r.next=13;break}throw new Error("no data");case 13:return r.abrupt("return",l);case 14:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){C(o,e,i,a,u,"next",r)}function u(r){C(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}();function q(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}var N=function(){var r,t=(r=j().mark((function r(t){var n;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E({databaseString:"orders",selectString:"*,restaurant:restaurant_id(id,hidden,image_url,name)",eqs:[{id:t,eqString:"id"}]});case 2:return n=r.sent,r.abrupt("return",n);case 4:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){q(o,e,i,a,u,"next",r)}function u(r){q(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}();function T(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}var M=function(){var r,t=(r=j().mark((function r(t,n){return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,R({selectString:"*,user:user_id(id,name,email),order:order_id!inner(id,restaurant:restaurant_id!inner(id))",eqs:[{id:t,eqString:"order.id"},{id:n,eqString:"order.restaurant.id"}]});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){T(o,e,i,a,u,"next",r)}function u(r){T(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(r,n){return t.apply(this,arguments)}}();function L(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}var D=function(){var r,t=(r=j().mark((function r(t){var n,e,i,o,a,u,c,s;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.databaseString,e=t.selectString,i=t.eqs,0!==(o=void 0===i?[]:i).length){r.next=3;break}throw new Error("Invalid id");case 3:return a=o.reduce((function(r,t){return r.eq(t.eqString,t.id)}),P({databaseString:n,selectString:e})),r.next=6,a;case 6:if(u=r.sent,c=u.data,!(s=u.error)){r.next=11;break}throw s;case 11:if(c){r.next=13;break}throw new Error("no data");case 13:return r.abrupt("return",c);case 14:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){L(o,e,i,a,u,"next",r)}function u(r){L(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}();function U(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}var R=function(){var r,t=(r=j().mark((function r(t){var n,e,i,o;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.selectString,e=t.eqs,i=void 0===e?[]:e,r.next=3,D({databaseString:"order_items",selectString:n,eqs:i});case 3:return o=r.sent,r.abrupt("return",o);case 5:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){U(o,e,i,a,u,"next",r)}function u(r){U(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}(),$=n(41622);function F(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}!function(){var r,t=(r=j().mark((function r(t){var n,e;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,D({databaseString:"menu_item_options",selectString:"*,restaurant:restaurant_id(id),menu_item:menu_item_id(id,hidden,name,cost,type)",eqs:[{id:t,eqString:"restaurant.id"}]});case 2:return n=r.sent,e=(0,$.ux)(n),r.abrupt("return",e);case 5:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){F(o,e,i,a,u,"next",r)}function u(r){F(o,e,i,a,u,"throw",r)}a(void 0)}))})}();var W=n(89664);function B(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function X(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}function z(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function G(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,i,o=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(o.push(e.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return B(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var H=function(r){var t=r.orderId,n=r.restaurantId,e=G(i.useState([]),2),o=e[0],a=e[1],u=i.useCallback((function(){return new Promise((function(r,e){(function(){var i,o=(i=j().mark((function i(){var o;return j().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,M(t,n);case 3:o=i.sent,r(o),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),e(i.t0);case 10:case"end":return i.stop()}}),i,null,[[0,7]])})),function(){var r=this,t=arguments;return new Promise((function(n,e){var o=i.apply(r,t);function a(r){X(o,n,e,a,u,"next",r)}function u(r){X(o,n,e,a,u,"throw",r)}a(void 0)}))});return function(){return o.apply(this,arguments)}})()()}))}),[t,n]),c=(0,S.Z)({asyncCallback:u}),s=c.isInit,l=c.isLoading,f=c.error,d=c.recall,p=c.result,h=i.useCallback((function(r){var t;if(!r.errors){var n=null===(t=r.old)||void 0===t?void 0:t.id;if(n&&!(n<1)){var e=r.new;e&&a((function(r){return r.map((function(r){return r.id===n?function(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),e.forEach((function(t){z(r,t,n[t])}))}return r}({},r,{note:e.note,quantity:e.quantity,cost:e.cost,item_name:e.item_name,item_type:e.item_type}):r}))}))}}}),[]),m=i.useCallback((function(r){var t;if(!r.errors){var n=null===(t=r.old)||void 0===t?void 0:t.id;n&&(n<=0||a((function(r){return r.filter((function(r){return r.id!==n}))})))}}),[]);return(0,W.Z)({path:"order_items",updateCallback:h,deleteCallback:m}),i.useEffect((function(){a(p||[])}),[p]),{isInit:s,isLoading:l,error:f,recall:d,orderItemList:o}};function V(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function J(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function K(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),e.forEach((function(t){J(r,t,n[t])}))}return r}function Q(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,i,o=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(o.push(e.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(r,t)||rr(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(r){return function(r){if(Array.isArray(r))return V(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||rr(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(r,t){if(r){if("string"===typeof r)return V(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(r,t):void 0}}var tr=function(r){return r.item_type?"".concat(r.item_type,".").concat(r.item_name):r.item_name},nr=function(r){var t=r.orderId,n=r.restaurantId,o=Q(i.useState(!1),2),a=o[0],u=o[1],s=H({orderId:t,restaurantId:n}).orderItemList,f=i.useMemo((function(){return s.reduce((function(r,t){return r+t.cost*t.quantity}),0)}),[s]),g=i.useMemo((function(){return s.reduce((function(r,t){var n={cost:t.cost,quantity:t.quantity,totalCost:t.cost*t.quantity,user:t.user},e=a?t.user.name:"".concat(n.cost," ").concat(tr(t)),i=a?"".concat(n.cost," ").concat(tr(t)):t.user.name,o=r.findIndex((function(r){return r.title===e}));if(o>-1){var u=r[o];return u.items.push(K({},n,{title:i})),u.quantity+=n.quantity,u.totalCost+=n.totalCost,r[o]=u,r}return Y(r).concat([K({id:e},n,{title:e,items:[K({title:i},n)]})])}),Array())}),[a,s]);return(0,e.jsxs)(l.Z,{children:[(0,e.jsxs)(d.Z,{direction:"row",spacing:1,justifyContent:"space-between",alignItems:"center",children:[(0,e.jsx)(p.Z,{control:(0,e.jsx)(h.Z,{checked:a,onChange:function(r){u(r.target.checked)},inputProps:{"aria-label":"sort-by-user-switch"}}),label:"By User"}),(0,e.jsxs)(l.Z,{className:"text-right",children:["Total Cost: ",f]})]}),g.map((function(r,t){return(0,e.jsxs)(m.Z,{children:[(0,e.jsx)(v.Z,{className:"flex-row-reverse",expandIcon:(0,e.jsx)(w.Z,{}),children:(0,e.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,e.jsx)(c.ZP,{item:!0,xs:8,children:(0,e.jsx)(y.Z,{children:r.title})}),(0,e.jsx)(c.ZP,{className:"flex flex-wrap items-center justify-end",item:!0,xs:2,children:(0,e.jsx)(y.Z,{children:r.quantity})}),(0,e.jsx)(c.ZP,{className:"flex flex-wrap items-center justify-end",item:!0,xs:2,children:(0,e.jsx)(y.Z,{children:r.totalCost})})]})}),(0,e.jsx)(x.Z,{children:r.items.map((function(r,t){return(0,e.jsxs)(c.ZP,{className:"mr-10",container:!0,spacing:1,children:[(0,e.jsx)(c.ZP,{item:!0,xs:8,children:a?(0,e.jsx)(y.Z,{children:r.title}):(0,e.jsx)(b.Z,{title:"".concat(r.user.name," (").concat(r.user.email,")"),placement:"left",children:(0,e.jsx)(y.Z,{children:r.title})})}),(0,e.jsx)(c.ZP,{className:"flex flex-wrap items-center justify-end",item:!0,xs:2,children:(0,e.jsx)(y.Z,{children:r.quantity})}),(0,e.jsx)(c.ZP,{className:"flex flex-wrap items-center justify-end",item:!0,xs:2,children:(0,e.jsx)(y.Z,{children:r.totalCost})})]},"accordion-order-item-items-".concat(r.title,"-").concat(t))}))})]},a?"by-user-accordion-order-item-".concat(r.id,"-").concat(t):"accordion-order-item-".concat(r.id,"-").concat(t))}))]})},er=n(84648),ir=n(11588),or=n(86273),ar=n(93946),ur=n(67720),cr=n(66242),sr=n(96540),lr=n(94895),fr=n(10484),dr=n(29726),pr=n(85759);function hr(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}var mr=function(){var r,t=(r=j().mark((function r(t){var n,e,i;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Z.O.from("order_items").insert(t);case 2:if(n=r.sent,e=n.data,!(i=n.error)){r.next=7;break}throw i;case 7:if(e){r.next=9;break}throw new Error("invalid orders");case 9:return r.abrupt("return",e);case 10:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){hr(o,e,i,a,u,"next",r)}function u(r){hr(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}();function vr(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function yr(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}function xr(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,i,o=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(o.push(e.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return vr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vr(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var br=function(r){var t=r.user,n=r.doClear,o=r.newOrderItemList,a=r.orderId,u=r.restaurantId,c=xr(i.useState(!1),2),s=c[0],l=c[1],f=i.useMemo((function(){var r=o.reduce((function(r,t){return r+t.option.cost*t.quantity}),0);return"DO ORDER WITH ".concat(r)}),[o]);return(0,e.jsx)(pr.Z,{disabled:0===o.length,loading:s,onClick:function(){(function(){var r,e=(r=j().mark((function r(){var e;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!s){r.next=2;break}return r.abrupt("return");case 2:return l(!0),r.prev=3,e=o.map((function(r){return{note:r.note,quantity:r.quantity,cost:r.option.cost,item_name:r.option.name,item_type:r.option.type,user_id:t.id,order_id:a,restaurant_id:u}})),r.next=7,mr(e);case 7:n(),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),console.log("asyncCreateOrderItems error");case 13:l(!1);case 14:case"end":return r.stop()}}),r,null,[[3,10]])})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){yr(o,e,i,a,u,"next",r)}function u(r){yr(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(){return e.apply(this,arguments)}})()()},children:f})};function wr(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function gr(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function jr(r){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},e=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),e.forEach((function(t){gr(r,t,n[t])}))}return r}function Sr(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,i,o=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(o.push(e.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(r,t)||Ir(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(r){return function(r){if(Array.isArray(r))return wr(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||Ir(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(r,t){if(r){if("string"===typeof r)return wr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wr(r,t):void 0}}var Pr=[1,2,3],kr={note:"",quantity:1,option:null},Or=function(r){var t=r.orderId,n=r.restaurantId,o=r.recallEachOrder,a=Sr(i.useState(kr),2),u=a[0],f=a[1],p=Sr(i.useState([]),2),h=p[0],m=p[1],v=Sr(i.useState(!1),2),y=v[0],x=v[1],b=function(){return x(!1)},w=(0,dr.Z)().user,g=(0,fr.Z)(n).restaurantMenuWithItemOptions,j=i.useMemo((function(){return g.flatMap((function(r){var t=r.type?"".concat(r.type,".").concat(r.name):r.name;return[jr({title:"".concat(r.cost," ").concat(t),sectionTitle:t},r)].concat(Zr(r.itemOptions.map((function(r){return jr({sectionTitle:t,title:"".concat(r.cost," ").concat(r.type,".").concat(r.name)},r)}))))}))}),[g]),S=i.useMemo((function(){return!u.option}),[u]);return w?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.Z,{onClick:function(){return x(!0)},children:["NEWORDERMENUITEM ",n]}),(0,e.jsx)(er.Z,{open:y,onClose:b,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,e.jsx)(l.Z,{className:"absolute top-1/2 left-1/2 h-[90%] w-[90%] -translate-y-1/2 -translate-x-1/2 overflow-y-auto overflow-y-hidden rounded bg-white p-4 shadow-xl lg:h-[40rem] lg:max-h-[90%] lg:w-[60rem]",children:(0,e.jsxs)(l.Z,{className:"relative flex h-full w-full flex-col",children:[(0,e.jsxs)(c.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,e.jsx)(c.ZP,{item:!0,xs:12,sm:7,children:(0,e.jsx)(ir.Z,{id:"grouped-demo",options:j.sort((function(r,t){return-t.sectionTitle.localeCompare(r.sectionTitle)})),groupBy:function(r){return r.sectionTitle},getOptionLabel:function(r){return r.title},renderInput:function(r){return(0,e.jsx)(or.Z,jr({},r,{label:"\u9ede\u9910\u62c9"}))},onChange:function(r,t){f((function(r){return jr({},r,{option:t})}))},value:u.option})}),(0,e.jsx)(c.ZP,{item:!0,xs:4,sm:5,children:(0,e.jsx)(ir.Z,{id:"grouped-demo",options:Pr,defaultValue:1,getOptionLabel:function(r){return r.toString()},renderInput:function(r){return(0,e.jsx)(or.Z,jr({},r,{label:"\u8981\u591a\u5c11\u8b1b\u554a\uff1f"}))},onChange:function(r,t){t&&f((function(r){return jr({},r,{quantity:t})}))},value:u.quantity})}),(0,e.jsx)(c.ZP,{item:!0,xs:6,sm:11,children:(0,e.jsx)(or.Z,{className:"w-full",label:"\u5099\u8a3b",variant:"outlined",value:u.note,onChange:function(r){return f((function(t){return jr({},t,{note:r.target.value})}))}})}),(0,e.jsx)(c.ZP,{item:!0,xs:2,sm:1,children:(0,e.jsx)(ar.Z,{disabled:S,onClick:function(){u.option&&(m((function(r){return Zr(r).concat([u])})),f(kr))},children:(0,e.jsx)(sr.Z,{})})})]}),(0,e.jsx)(ur.Z,{className:"py-2"}),(0,e.jsx)(d.Z,{m:2,spacing:2,className:"flex-1 overflow-y-auto",children:h.map((function(r,t){return(0,e.jsxs)(cr.Z,{className:"flex flex-row justify-between p-2",children:[(0,e.jsxs)(d.Z,{children:[(0,e.jsx)("p",{children:r.option.name}),(0,e.jsxs)("p",{children:["\u50f9\u683c\uff1a",r.option.cost]}),(0,e.jsxs)("p",{children:["\u6578\u91cf\uff1a",r.quantity]}),r.note&&(0,e.jsxs)("p",{children:["\u5099\u8a3b\uff1a",r.note]})]}),(0,e.jsx)(ar.Z,{onClick:function(){return m((function(r){return(0,$.gn)(r,t)}))},children:(0,e.jsx)(lr.Z,{})})]},"new-order-item-card-".concat(r.option.id,"-").concat(t))}))}),(0,e.jsx)(ur.Z,{className:"py-2"}),(0,e.jsxs)(d.Z,{direction:"row-reverse",children:[(0,e.jsx)(s.Z,{onClick:b,children:"\u95dc\u9589"}),(0,e.jsx)(br,{user:w,orderId:t,restaurantId:n,doClear:function(){m([]),o()},newOrderItemList:h}),(0,e.jsx)(s.Z,{onClick:function(){return m([])},children:"CLEAR"})]})]})})})]}):null},Ar=n(65988),_r=n(55811),Cr=function(){return(0,_r.Z)().adminUser?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Ar.default,{id:"b7168089eb51251e",children:"@media only print {body{counter-reset:page-number;\n-webkit-print-color-adjust:exact!important}\n#header{display:none}\nmain{width:100vw}\n#each-order>:not(#finish-export-button-container), #finish-export-button{display:none}\n@page {\nmargin:0.5cm;\nsize:A4 portrait;\n}\n.print{display:block!important}\n.no-print{display:none}\n.text{page-break-before:auto}}"}),!1,(0,e.jsxs)(l.Z,{className:"print hidden",children:[(0,e.jsx)(l.Z,{children:"Do Finish Export"}),(0,e.jsxs)(d.Z,{className:"bg-yellow-300",children:[Array(20).fill(0).map((function(r,t){return(0,e.jsx)("p",{className:"jsx-b7168089eb51251e text",children:"Test"},"first-p-".concat(t))})),Array(10).fill(0).map((function(r,t){return(0,e.jsx)("p",{className:"jsx-b7168089eb51251e text",children:"Test1"},"second-p-".concat(t))})),Array(20).fill(0).map((function(r,t){return(0,e.jsx)("p",{className:"jsx-b7168089eb51251e text",children:"Test2"},"third-p-".concat(t))})),Array(30).fill(0).map((function(r,t){return(0,e.jsx)("p",{className:"jsx-b7168089eb51251e text",children:"Test3"},"four-p-".concat(t))}))]})]})]}):null},Er=function(r){var t=r.databaseString;return I(t).delete()};function qr(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}var Nr=function(){var r,t=(r=j().mark((function r(t){var n,e,i;return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.orderId,e=t.userId,r.next=3,Er({databaseString:"order_items"}).eq("order_id",n).eq("user_id",e);case 3:if(!(i=r.sent.error)){r.next=7;break}throw console.log("error: ",null===i||void 0===i?void 0:i.message),i;case 7:return r.abrupt("return",!0);case 8:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){qr(o,e,i,a,u,"next",r)}function u(r){qr(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}();function Tr(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function Mr(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}function Lr(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,i,o=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(o.push(e.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return Tr(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tr(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Dr=function(r){var t=r.orderId,n=r.recallEachOrder,o=(0,dr.Z)().user,a=Lr(i.useState(!1),2),u=a[0],c=a[1];return o?(0,e.jsx)(pr.Z,{loading:u,onClick:function(){(function(){var r,e=(r=j().mark((function r(){return j().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!u){r.next=2;break}return r.abrupt("return");case 2:return c(!0),r.prev=3,r.next=6,Nr({orderId:t,userId:o.id});case 6:n(),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(3),console.log("asyncDeleteOrderItems error");case 12:c(!1);case 13:case"end":return r.stop()}}),r,null,[[3,9]])})),function(){var t=this,n=arguments;return new Promise((function(e,i){var o=r.apply(t,n);function a(r){Mr(o,e,i,a,u,"next",r)}function u(r){Mr(o,e,i,a,u,"throw",r)}a(void 0)}))});return function(){return e.apply(this,arguments)}})()()},children:"DELETEORDERMENUITEM"}):null};function Ur(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function Rr(r,t,n,e,i,o,a){try{var u=r[o](a),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(e,i)}function $r(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,i,o=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(o.push(e.value),!t||o.length!==t);a=!0);}catch(c){u=!0,i=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return Ur(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ur(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fr=function(r){var t=$r(i.useState(void 0),2),n=t[0],e=t[1],o=i.useCallback((function(){return new Promise((function(t,n){(function(){var e,i=(e=j().mark((function e(){var i;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(r);case 3:i=e.sent,t(i),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),n(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var r=this,t=arguments;return new Promise((function(n,i){var o=e.apply(r,t);function a(r){Rr(o,n,i,a,u,"next",r)}function u(r){Rr(o,n,i,a,u,"throw",r)}a(void 0)}))});return function(){return i.apply(this,arguments)}})()()}))}),[r]),a=(0,S.Z)({asyncCallback:o}),u=a.isInit,c=a.isLoading,s=a.error,l=a.recall,f=a.result;return i.useEffect((function(){console.log("setEachOrder with result change"),e(f)}),[f]),{isInit:u,isLoading:c,error:s,recall:l,eachOrder:n}},Wr=function(r){var t=r.id,n=Fr(t),i=n.isInit,o=n.isLoading,a=n.error,d=n.eachOrder,p=n.recall;return i?(0,e.jsx)("div",{children:"content init..."}):o?(0,e.jsx)("div",{children:"loading..."}):a?(0,e.jsx)("div",{children:"Get Error..."}):d?(0,e.jsxs)(c.ZP,{id:"each-order",container:!0,spacing:2,justifyContent:"space-around",children:[(0,e.jsx)(c.ZP,{id:"finish-export-button-container",item:!0,xs:10,children:(0,e.jsx)(Cr,{})}),(0,e.jsxs)(c.ZP,{item:!0,xs:5,children:[(0,e.jsx)(s.Z,{variant:"contained",onClick:p,children:"D.C."}),(0,e.jsxs)(l.Z,{children:["order id: ",d.id]}),(0,e.jsx)(l.Z,{children:d.restaurant.name})]}),(0,e.jsx)(c.ZP,{item:!0,xs:3,children:(0,e.jsx)(l.Z,{className:u()("relative aspect-[3/4]",!d.restaurant.image_url&&"bg-blue-300"),children:d.restaurant.image_url&&(0,e.jsx)(f.Z,{priority:!0,src:d.restaurant.image_url,alt:d.restaurant.name,layout:"fill"})})}),(0,e.jsxs)(c.ZP,{item:!0,xs:10,children:[(0,e.jsx)(Or,{orderId:t,restaurantId:d.restaurant.id,recallEachOrder:p}),(0,e.jsx)(Dr,{orderId:t,recallEachOrder:p})]}),(0,e.jsx)(c.ZP,{item:!0,xs:10,children:(0,e.jsx)(nr,{orderId:t,restaurantId:d.restaurant.id})})]}):(0,e.jsx)("div",{children:"Invalid OrderDetail"})},Br=function(){return(0,e.jsx)(o.Z,{children:function(r){return(0,e.jsx)(Wr,{id:r})}})}}},function(r){r.O(0,[643,954,326,122,726,504,404,860,774,888,179],(function(){return t=26479,r(r.s=t);var t}));var t=r.O();_N_E=t}]);