(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[478],{6479:function(r,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orders/detail",function(){return e(9533)}])},9533:function(r,t,e){"use strict";e.r(t),e.d(t,{default:function(){return kr}});var n=e(5893),o=e(7294),i=e(6199),a=e(4184),u=e.n(a),c=e(6886),s=e(3321),l=e(6822),f=e(1077),d=e(6447),m=e(2208),p=e(5843),h=e(7358),y=e(8895),v=e(5861),x=e(2797),b=e(2902),w=e(3508),j=e(4051),g=e.n(j),Z=e(301),S=e(3298);function I(r,t,e,n,o,i,a){try{var u=r[i](a),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(n,o)}var O=function(){var r,t=(r=g().mark((function r(t){var e,n,o,i,a;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=t.databaseString,n=t.selectString,r.next=3,S.O.from(e).select(n);case 3:if(o=r.sent,i=o.data,!(a=o.error)){r.next=8;break}throw a;case 8:if(i){r.next=10;break}throw new Error("no data");case 10:return r.abrupt("return",i);case 11:case"end":return r.stop()}}),r)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(r){I(i,n,o,a,u,"next",r)}function u(r){I(i,n,o,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}();function k(r,t,e,n,o,i,a){try{var u=r[i](a),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(n,o)}var P=function(){var r,t=(r=g().mark((function r(t){var e,n,o,i,a,u,c,s;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=t.databaseString,n=t.selectString,o=t.eq,i=o.id,a=o.eqString,i){r.next=3;break}throw new Error("Invalid id");case 3:return r.next=5,S.O.from(e).select(n).eq(a,i);case 5:if(u=r.sent,c=u.data,!(s=u.error)){r.next=10;break}throw s;case 10:if(c){r.next=12;break}throw new Error("no data");case 12:return r.abrupt("return",c);case 13:case"end":return r.stop()}}),r)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(r){k(i,n,o,a,u,"next",r)}function u(r){k(i,n,o,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}();function C(r,t,e,n,o,i,a){try{var u=r[i](a),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(n,o)}var A=function(){var r,t=(r=g().mark((function r(t){var e,n,o,i,a,u,c,s,l,f;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e=t.databaseString,n=t.selectString,o=t.notNullString,i=void 0===o?"id":o,a=t.eq,u=a.id,c=a.eqString,u){r.next=3;break}throw new Error("Invalid id");case 3:return r.next=5,S.O.from(e).select(n).eq(c,u).not(i,"is","null").limit(1).single();case 5:if(s=r.sent,l=s.data,!(f=s.error)){r.next=10;break}throw f;case 10:if(l){r.next=12;break}throw new Error("no data");case 12:return r.abrupt("return",l);case 13:case"end":return r.stop()}}),r)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(r){C(i,n,o,a,u,"next",r)}function u(r){C(i,n,o,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}(),_=e(1622);function E(r,t,e,n,o,i,a){try{var u=r[i](a),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(n,o)}function q(r){return function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(r){E(i,n,o,a,u,"next",r)}function u(r){E(i,n,o,a,u,"throw",r)}a(void 0)}))}}!function(){var r=q(g().mark((function r(){var t;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,O({databaseString:"orders"});case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r)})))}();var N=function(){var r=q(g().mark((function r(t){var e;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,A({databaseString:"orders",selectString:"*,restaurant(id,hidden,image_url,name)",eq:{id:t,eqString:"id"}});case 2:return e=r.sent,r.abrupt("return",e);case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}(),T=function(){var r=q(g().mark((function r(t,e){var n,o,i;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,S.O.from("order_items").select("*,user(id,name,email),order!inner(id,restaurant!inner(id))").eq("order.id",t).eq("restaurant",e);case 2:if(n=r.sent,o=n.data,!(i=n.error)){r.next=7;break}throw i;case 7:if(o){r.next=9;break}throw new Error("no orderItems");case 9:return r.abrupt("return",o);case 10:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}(),M=(function(){var r=q(g().mark((function r(t){var e,n;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,P({databaseString:"menu_item_options",selectString:"*,restaurant(id),menu_item(id,hidden,name,cost,type)",eq:{id:t,eqString:"restaurant.id"}});case 2:return e=r.sent,n=(0,_.ux)(e),r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))}(),e(9664));function L(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function D(r,t,e,n,o,i,a){try{var u=r[i](a),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(n,o)}function U(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function $(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,o,i=[],a=!0,u=!1;try{for(e=e.call(r);!(a=(n=e.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return L(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);"Object"===e&&r.constructor&&(e=r.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return L(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(r){var t=r.orderId,e=r.restaurantId,n=$(o.useState([]),2),i=n[0],a=n[1],u=o.useCallback((function(){return new Promise((function(r,n){(function(){var o,i=(o=g().mark((function o(){var i;return g().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,T(t,e);case 3:i=o.sent,r(i),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),n(o.t0);case 10:case"end":return o.stop()}}),o,null,[[0,7]])})),function(){var r=this,t=arguments;return new Promise((function(e,n){var i=o.apply(r,t);function a(r){D(i,e,n,a,u,"next",r)}function u(r){D(i,e,n,a,u,"throw",r)}a(void 0)}))});return function(){return i.apply(this,arguments)}})()()}))}),[t,e]),c=(0,Z.Z)({asyncCallback:u}),s=c.isInit,l=c.isLoading,f=c.error,d=c.recall,m=c.result,p=o.useCallback((function(r){var t;if(!r.errors){var e=null===(t=r.old)||void 0===t?void 0:t.id;if(e&&!(e<1)){var n=r.new;n&&a((function(r){return r.map((function(r){return r.id===e?function(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},n=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e).filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})))),n.forEach((function(t){U(r,t,e[t])}))}return r}({},r,{note:n.note,quantity:n.quantity,cost:n.cost,item_name:n.item_name,item_type:n.item_type}):r}))}))}}}),[]),h=o.useCallback((function(r){var t;if(!r.errors){var e=null===(t=r.old)||void 0===t?void 0:t.id;e&&(e<=0||a((function(r){return r.filter((function(r){return r.id!==e}))})))}}),[]);return(0,M.Z)({path:"order_items",updateCallback:p,deleteCallback:h}),o.useEffect((function(){a(m||[])}),[m]),{isInit:s,isLoading:l,error:f,recall:d,orderItemList:i}};function B(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function W(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function X(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},n=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e).filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})))),n.forEach((function(t){W(r,t,e[t])}))}return r}function F(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,o,i=[],a=!0,u=!1;try{for(e=e.call(r);!(a=(n=e.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(r,t)||H(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(r){return function(r){if(Array.isArray(r))return B(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||H(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(r,t){if(r){if("string"===typeof r)return B(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?B(r,t):void 0}}var V=function(r){return r.item_type?"".concat(r.item_type,".").concat(r.item_name):r.item_name},z=function(r){var t=r.orderId,e=r.restaurantId,i=F(o.useState(!1),2),a=i[0],u=i[1],s=R({orderId:t,restaurantId:e}).orderItemList,f=o.useMemo((function(){return s.reduce((function(r,t){return r+t.cost*t.quantity}),0)}),[s]),j=o.useMemo((function(){return s.reduce((function(r,t){var e={cost:t.cost,quantity:t.quantity,totalCost:t.cost*t.quantity,user:t.user},n=a?t.user.name:"".concat(e.cost," ").concat(V(t)),o=a?"".concat(e.cost," ").concat(V(t)):t.user.name,i=r.findIndex((function(r){return r.title===n}));if(i>-1){var u=r[i];return u.items.push(X({},e,{title:o})),u.quantity+=e.quantity,u.totalCost+=e.totalCost,r[i]=u,r}return G(r).concat([X({id:n},e,{title:n,items:[X({title:o},e)]})])}),Array())}),[a,s]);return(0,n.jsxs)(l.Z,{children:[(0,n.jsxs)(d.Z,{direction:"row",spacing:1,justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(m.Z,{control:(0,n.jsx)(p.Z,{checked:a,onChange:function(r){u(r.target.checked)},inputProps:{"aria-label":"sort-by-user-switch"}}),label:"By User"}),(0,n.jsxs)(l.Z,{className:"text-right",children:["Total Cost: ",f]})]}),j.map((function(r,t){return(0,n.jsxs)(h.Z,{children:[(0,n.jsx)(y.Z,{className:"flex-row-reverse",expandIcon:(0,n.jsx)(w.Z,{}),children:(0,n.jsxs)(c.ZP,{container:!0,spacing:1,children:[(0,n.jsx)(c.ZP,{item:!0,xs:8,children:(0,n.jsx)(v.Z,{children:r.title})}),(0,n.jsx)(c.ZP,{className:"flex flex-wrap items-center justify-end",item:!0,xs:2,children:(0,n.jsx)(v.Z,{children:r.quantity})}),(0,n.jsx)(c.ZP,{className:"flex flex-wrap items-center justify-end",item:!0,xs:2,children:(0,n.jsx)(v.Z,{children:r.totalCost})})]})}),(0,n.jsx)(x.Z,{children:r.items.map((function(r,t){return(0,n.jsxs)(c.ZP,{className:"mr-10",container:!0,spacing:1,children:[(0,n.jsx)(c.ZP,{item:!0,xs:8,children:a?(0,n.jsx)(v.Z,{children:r.title}):(0,n.jsx)(b.Z,{title:"".concat(r.user.name," (").concat(r.user.email,")"),placement:"left",children:(0,n.jsx)(v.Z,{children:r.title})})}),(0,n.jsx)(c.ZP,{className:"flex flex-wrap items-center justify-end",item:!0,xs:2,children:(0,n.jsx)(v.Z,{children:r.quantity})}),(0,n.jsx)(c.ZP,{className:"flex flex-wrap items-center justify-end",item:!0,xs:2,children:(0,n.jsx)(v.Z,{children:r.totalCost})})]},"accordion-order-item-items-".concat(r.title,"-").concat(t))}))})]},a?"by-user-accordion-order-item-".concat(r.id,"-").concat(t):"accordion-order-item-".concat(r.id,"-").concat(t))}))]})},J=e(4648),K=e(52),Q=e(7798),Y=e(3946),rr=e(7720),tr=e(1024),er=e(6540),nr=e(4895),or=e(484),ir=e(9726),ar=e(5759);function ur(r,t,e,n,o,i,a){try{var u=r[i](a),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(n,o)}var cr=function(){var r,t=(r=g().mark((function r(t){var e,n,o;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,S.O.from("order_items").insert(t);case 2:if(e=r.sent,n=e.data,!(o=e.error)){r.next=7;break}throw o;case 7:if(n){r.next=9;break}throw new Error("invalid orders");case 9:return r.abrupt("return",n);case 10:case"end":return r.stop()}}),r)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(r){ur(i,n,o,a,u,"next",r)}function u(r){ur(i,n,o,a,u,"throw",r)}a(void 0)}))});return function(r){return t.apply(this,arguments)}}();function sr(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function lr(r,t,e,n,o,i,a){try{var u=r[i](a),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(n,o)}function fr(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,o,i=[],a=!0,u=!1;try{for(e=e.call(r);!(a=(n=e.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return sr(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);"Object"===e&&r.constructor&&(e=r.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return sr(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dr=function(r){var t=r.user,e=r.doClear,i=r.newOrderItemList,a=r.orderId,u=r.restaurantId,c=fr(o.useState(!1),2),s=c[0],l=c[1],f=o.useMemo((function(){var r=i.reduce((function(r,t){return r+t.option.cost*t.quantity}),0);return"DO ORDER WITH ".concat(r)}),[i]);return(0,n.jsx)(ar.Z,{loading:s,onClick:function(){(function(){var r,n=(r=g().mark((function r(){var n;return g().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!s){r.next=2;break}return r.abrupt("return");case 2:return l(!0),r.prev=3,n=i.map((function(r){return{note:r.note,quantity:r.quantity,cost:r.option.cost,item_name:r.option.name,item_type:r.option.type,user:t.id,order:a,restaurant:u}})),r.next=7,cr(n);case 7:e(),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),console.log("asyncCreateRestaurants error");case 13:l(!1);case 14:case"end":return r.stop()}}),r,null,[[3,10]])})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(r){lr(i,n,o,a,u,"next",r)}function u(r){lr(i,n,o,a,u,"throw",r)}a(void 0)}))});return function(){return n.apply(this,arguments)}})()()},children:f})};function mr(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function pr(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function hr(r){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},n=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(e).filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})))),n.forEach((function(t){pr(r,t,e[t])}))}return r}function yr(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,o,i=[],a=!0,u=!1;try{for(e=e.call(r);!(a=(n=e.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(r,t)||xr(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(r){return function(r){if(Array.isArray(r))return mr(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||xr(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xr(r,t){if(r){if("string"===typeof r)return mr(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);return"Object"===e&&r.constructor&&(e=r.constructor.name),"Map"===e||"Set"===e?Array.from(e):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?mr(r,t):void 0}}var br=[1,2,3],wr={note:"",quantity:1,option:null},jr=function(r){var t=r.orderId,e=r.restaurantId,i=r.recallEachOrder,a=yr(o.useState(wr),2),u=a[0],f=a[1],m=yr(o.useState([]),2),p=m[0],h=m[1],y=yr(o.useState(!1),2),v=y[0],x=y[1],b=function(){return x(!1)},w=(0,ir.Z)().user,j=(0,or.Z)(e).restaurantMenuWithItemOptions,g=o.useMemo((function(){return j.flatMap((function(r){var t=r.type?"".concat(r.type,".").concat(r.name):r.name;return[hr({title:"".concat(r.cost," ").concat(t),sectionTitle:t},r)].concat(vr(r.itemOptions.map((function(r){return hr({sectionTitle:t,title:"".concat(r.cost," ").concat(r.type,".").concat(r.name)},r)}))))}))}),[j]),Z=o.useMemo((function(){return!u.option}),[u]);return w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.Z,{onClick:function(){return x(!0)},children:["NewOrderMenuItem ",e]}),(0,n.jsx)(J.Z,{open:v,onClose:b,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,n.jsx)(l.Z,{className:"absolute top-1/2 left-1/2 h-[90%] w-[90%] -translate-y-1/2 -translate-x-1/2 overflow-y-auto overflow-y-hidden rounded bg-white p-4 shadow-xl lg:h-[40rem] lg:max-h-[90%] lg:w-[60rem]",children:(0,n.jsxs)(l.Z,{className:"relative flex h-full w-full flex-col",children:[(0,n.jsxs)(c.ZP,{container:!0,spacing:1,alignItems:"center",children:[(0,n.jsx)(c.ZP,{item:!0,xs:12,sm:7,children:(0,n.jsx)(K.Z,{id:"grouped-demo",options:g.sort((function(r,t){return-t.sectionTitle.localeCompare(r.sectionTitle)})),groupBy:function(r){return r.sectionTitle},getOptionLabel:function(r){return r.title},renderInput:function(r){return(0,n.jsx)(Q.Z,hr({},r,{label:"\u9ede\u9910\u62c9"}))},onChange:function(r,t){f((function(r){return hr({},r,{option:t})}))},value:u.option})}),(0,n.jsx)(c.ZP,{item:!0,xs:4,sm:5,children:(0,n.jsx)(K.Z,{id:"grouped-demo",options:br,defaultValue:1,getOptionLabel:function(r){return r.toString()},renderInput:function(r){return(0,n.jsx)(Q.Z,hr({},r,{label:"\u8981\u591a\u5c11\u8b1b\u554a\uff1f"}))},onChange:function(r,t){t&&f((function(r){return hr({},r,{quantity:t})}))},value:u.quantity})}),(0,n.jsx)(c.ZP,{item:!0,xs:6,sm:11,children:(0,n.jsx)(Q.Z,{className:"w-full",label:"\u5099\u8a3b",variant:"outlined",value:u.note,onChange:function(r){return f((function(t){return hr({},t,{note:r.target.value})}))}})}),(0,n.jsx)(c.ZP,{item:!0,xs:2,sm:1,children:(0,n.jsx)(Y.Z,{disabled:Z,onClick:function(){u.option&&(h((function(r){return vr(r).concat([u])})),f(wr))},children:(0,n.jsx)(er.Z,{})})})]}),(0,n.jsx)(rr.Z,{className:"py-2"}),(0,n.jsx)(d.Z,{m:2,spacing:2,className:"flex-1 overflow-y-auto",children:p.map((function(r,t){return(0,n.jsxs)(tr.Z,{className:"flex flex-row justify-between p-2",children:[(0,n.jsxs)(d.Z,{children:[(0,n.jsx)("p",{children:r.option.name}),(0,n.jsxs)("p",{children:["\u50f9\u683c\uff1a",r.option.cost]}),(0,n.jsxs)("p",{children:["\u6578\u91cf\uff1a",r.quantity]}),r.note&&(0,n.jsxs)("p",{children:["\u5099\u8a3b\uff1a",r.note]})]}),(0,n.jsx)(Y.Z,{onClick:function(){return h((function(r){return(0,_.gn)(r,t)}))},children:(0,n.jsx)(nr.Z,{})})]},"new-order-item-card-".concat(r.option.id))}))}),(0,n.jsx)(rr.Z,{className:"py-2"}),(0,n.jsxs)(d.Z,{direction:"row-reverse",children:[(0,n.jsx)(s.Z,{onClick:b,children:"\u95dc\u9589"}),(0,n.jsx)(dr,{user:w,orderId:t,restaurantId:e,doClear:function(){h([]),i()},newOrderItemList:p}),(0,n.jsx)(s.Z,{onClick:function(){return h([])},children:"CLEAR"})]})]})})})]}):null};function gr(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Zr(r,t,e,n,o,i,a){try{var u=r[i](a),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(n,o)}function Sr(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=e){var n,o,i=[],a=!0,u=!1;try{for(e=e.call(r);!(a=(n=e.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==e.return||e.return()}finally{if(u)throw o}}return i}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return gr(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);"Object"===e&&r.constructor&&(e=r.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return gr(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ir=function(r){var t=Sr(o.useState(void 0),2),e=t[0],n=t[1],i=o.useCallback((function(){return new Promise((function(t,e){(function(){var n,o=(n=g().mark((function n(){var o;return g().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,N(r);case 3:o=n.sent,t(o),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),e(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})),function(){var r=this,t=arguments;return new Promise((function(e,o){var i=n.apply(r,t);function a(r){Zr(i,e,o,a,u,"next",r)}function u(r){Zr(i,e,o,a,u,"throw",r)}a(void 0)}))});return function(){return o.apply(this,arguments)}})()()}))}),[r]),a=(0,Z.Z)({asyncCallback:i}),u=a.isInit,c=a.isLoading,s=a.error,l=a.recall,f=a.result;return o.useEffect((function(){console.log("setEachOrder with result change"),n(f)}),[f]),{isInit:u,isLoading:c,error:s,recall:l,eachOrder:e}},Or=function(r){var t=r.id,e=Ir(t),o=e.isInit,i=e.isLoading,a=e.error,d=e.eachOrder,m=e.recall;return o?(0,n.jsx)("div",{children:"content init..."}):i?(0,n.jsx)("div",{children:"loading..."}):a?(0,n.jsx)("div",{children:"Get Error..."}):d?(0,n.jsxs)(c.ZP,{container:!0,spacing:2,justifyContent:"space-around",children:[(0,n.jsxs)(c.ZP,{item:!0,xs:5,children:[(0,n.jsxs)(s.Z,{variant:"contained",onClick:m,children:[" ","D.C."," "]}),(0,n.jsxs)(l.Z,{children:["order id: ",d.id]}),(0,n.jsx)(l.Z,{children:d.restaurant.name})]}),(0,n.jsx)(c.ZP,{item:!0,xs:3,children:(0,n.jsx)(l.Z,{className:u()("relative aspect-[3/4]",!d.restaurant.image_url&&"bg-blue-300"),children:d.restaurant.image_url&&(0,n.jsx)(f.Z,{priority:!0,src:d.restaurant.image_url,alt:d.restaurant.name,layout:"fill"})})}),(0,n.jsx)(c.ZP,{item:!0,xs:10,children:(0,n.jsx)(jr,{orderId:t,restaurantId:d.restaurant.id,recallEachOrder:m})}),(0,n.jsx)(c.ZP,{item:!0,xs:10,children:(0,n.jsx)(z,{orderId:t,restaurantId:d.restaurant.id})})]}):(0,n.jsx)("div",{children:"Invalid OrderDetail"})},kr=function(){return(0,n.jsx)(i.Z,{children:function(r){return(0,n.jsx)(Or,{id:r})}})}}},function(r){r.O(0,[240,345,177,528,945,824,213,860,774,888,179],(function(){return t=6479,r(r.s=t);var t}));var t=r.O();_N_E=t}]);