(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[510],{4318:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/restaurant/create/menu-image",function(){return n(4795)}])},4795:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return k}});var t=n(5893),a=n(7294),i=n(8580),u=n(4051),o=n.n(u),l=n(4231),s=n(2175),c=n(9151),d=n(1242),f=n(4832),m=n(1153),h=n(5632);function v(e,r,n,t,a,i,u){try{var o=e[i](u),l=o.value}catch(s){return void n(s)}o.done?r(l):Promise.resolve(l).then(t,a)}var p,b=function(){var e,r=(e=o().mark((function e(r){var n,t,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.path,t=r.file,a=(0,m.iH)(h.IG,n),e.next=4,(0,m.KV)(a,t);case 4:return e.abrupt("return",t.name);case 5:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function u(e){v(i,t,a,u,o,"next",e)}function o(e){v(i,t,a,u,o,"throw",e)}u(void 0)}))});return function(e){return r.apply(this,arguments)}}();function y(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function x(e,r,n,t,a,i,u){try{var o=e[i](u),l=o.value}catch(s){return void n(s)}o.done?r(l):Promise.resolve(l).then(t,a)}function w(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function j(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,a,i=[],u=!0,o=!1;try{for(n=n.call(e);!(u=(t=n.next()).done)&&(i.push(t.value),!r||i.length!==r);u=!0);}catch(l){o=!0,a=l}finally{try{u||null==n.return||n.return()}finally{if(o)throw a}}return i}}(e,r)||function(e,r){if(!e)return;if("string"===typeof e)return y(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var g=(w(p={},f.db.name,""),w(p,f.db.file,void 0),p),S=l.Ry().shape({name:l.Z_().required("\u672c\u6b04\u4f4d\u70ba\u5fc5\u586b"),file:l.nK().required("File is required")}),_=function(){var e=j(a.useState(!1),2),r=e[0],n=e[1],i=j(a.useState(""),1)[0],u=j(a.useState(void 0),2),l=u[0],m=u[1],h=(0,s.TA)({initialValues:g,validationSchema:S,onSubmit:function(){var e,t=(e=o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.file){e.next=2;break}return e.abrupt("return");case 2:if(!r){e.next=4;break}return e.abrupt("return");case 4:n(!0);try{b({path:"/menus/"+t.name,file:t.file}),m("success")}catch(a){m("failed")}n(!1);case 7:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(t,a){var i=e.apply(r,n);function u(e){x(i,t,a,u,o,"next",e)}function o(e){x(i,t,a,u,o,"throw",e)}u(void 0)}))});return function(e){return t.apply(this,arguments)}}()});return l?(0,t.jsxs)("div",{children:["result: ",l]}):(0,t.jsx)("div",{children:(0,t.jsxs)("form",{className:"mb-4 rounded bg-white px-8 pt-6 pb-8 shadow-md",onSubmit:h.handleSubmit,children:[(0,t.jsx)("div",{className:"flex flex-col",children:(0,t.jsxs)("div",{className:"flex-1 md:pr-3",children:[(0,t.jsx)(c.Z,{inputProps:{id:f.db.name,name:f.db.name,placeholder:"Restaurant Name",type:"text",onChange:h.handleChange,value:h.values[f.db.name]},label:"name*",showError:!(!h.touched[f.db.name]||!h.errors[f.db.name]),errorString:h.errors[f.db.name]}),(0,t.jsxs)("div",{className:"py-4 text-black",children:[(0,t.jsx)("input",{id:f.db.file,name:f.db.file,type:"file",onChange:function(e){var r,n=null===(r=e.target.files)||void 0===r?void 0:r[0];n&&n.name&&(h.setFieldValue(f.db.file,n,!0),h.values[f.db.name]||h.setFieldValue(f.db.name,n.name))}}),h.errors[f.db.file]&&(0,t.jsx)("p",{className:"text-red-500",children:h.errors[f.db.file]})]})]})}),i&&(0,t.jsx)("p",{children:i}),(0,t.jsx)(d.Z,{disabled:r,type:"submit",children:"\u78ba\u8a8d\u9001\u51fa"})]})})},N=n(9726),k=function(){var e=(0,N.Z)().isCanWriteFireStoreEmailUser;return(0,t.jsx)(i.Z,{children:e?(0,t.jsx)(_,{}):(0,t.jsx)("div",{children:"???"})})}}},function(e){e.O(0,[890,580,774,888,179],(function(){return r=4318,e(e.s=r);var r}));var r=e.O();_N_E=r}]);