(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{82388:function(r,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new-menu",function(){return n(32355)}])},41077:function(r,e,n){"use strict";var t=n(85893),a=(n(67294),n(25675)),o=n(11714),i=n(14689);function u(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function c(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){u(r,e,n[e])}))}return r}function l(r,e){if(null==r)return{};var n,t,a=function(r,e){if(null==r)return{};var n,t,a={},o=Object.keys(r);for(t=0;t<o.length;t++)n=o[t],e.indexOf(n)>=0||(a[n]=r[n]);return a}(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(t=0;t<o.length;t++)n=o[t],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(r,n)&&(a[n]=r[n])}return a}e.Z=function(r){var e=r.withNewTabLink,n=void 0===e||e,u=r.alt,s=void 0===u?"zoom-image":u,f=l(r,["withNewTabLink","alt"]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{wrapStyle:{width:"100%",height:"100%"},children:(0,t.jsx)("div",{className:"relative h-full w-full",children:(0,t.jsx)(a.default,c({},f,{alt:s}))})}),n&&"string"===typeof f.src&&(0,t.jsx)("div",{className:"absolute top-0 right-0 bg-white bg-opacity-30 shadow-md",children:(0,t.jsx)("a",{target:"_blank",rel:"noreferrer",href:f.src,children:(0,t.jsx)(i.Z,{fontSize:"large"})})})]})}},14607:function(r,e,n){"use strict";var t=n(85893),a=n(67294),o=n(36822),i=n(99103),u=n(44229),c=n(55811);e.Z=function(r){var e=r.children,n=(0,c.Z)(),l=n.isInit,s=n.adminUser,f=a.useMemo((function(){return l?(0,t.jsx)(o.Z,{children:"Init..."}):s?e:(0,t.jsx)(o.Z,{children:"404!"})}),[l,s,e]);return(0,t.jsx)(i.Z,{header:(0,t.jsx)(u.Z,{}),children:(0,t.jsx)(o.Z,{m:2,children:f})})}},70301:function(r,e,n){"use strict";var t=n(67294),a=n(63869);function o(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function i(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return o(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.Z=function(r){var e=r.asyncCallback,n=r.customErrorCallback,o=i(t.useState(!0),2),u=o[0],c=o[1],l=t.useCallback((function(){return e}),[e]),s=(0,a.Z)({asyncCallback:l(),customErrorCallback:n}),f=s.isLoading,d=s.error,m=s.result,h=s.recall,p=s.fetchData,v=t.useCallback((function(){p({finishCallBack:function(){c(!1)}})}),[p]),y=t.useCallback((function(){return!u&&h()}),[u,h]);return t.useEffect((function(){u&&(f||v())}),[u,f,v]),t.useEffect((function(){u||v()}),[u,v]),{isInit:u,setIsInit:c,isLoading:f,error:d,result:m,recall:y}}},32355:function(r,e,n){"use strict";n.r(e),n.d(e,{default:function(){return re}});var t=n(85893),a=n(67294),o=n(14607),i=n(36822),u=n(86886),c=n(11588),l=n(86273),s=n(40101),f=n(34051),d=n.n(f),m=n(94184),h=n.n(m),p=n(7258),v=n(87536),y=n(95496),b=n(93946),x=n(55113),g=n(69368),w=n(26447),j=n(56815),k=n(85759),Z=n(50594),S=n(83321),O=n(84648),I=n(27036),C=n(96540),A=n(71676),P=n(53298);function E(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var N=function(){var r,e=(r=d().mark((function r(e){var n,t,a,o,i,u,c;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}throw new Error("no input");case 2:if(n=e.name){r.next=5;break}throw new Error("no fileName");case 5:return r.next=7,P.O.storage.from("menus").upload("restaurant/"+n,e);case 7:if(t=r.sent,a=t.data,!(o=t.error)){r.next=12;break}throw o;case 12:if(a){r.next=14;break}throw new Error("update fail");case 14:return r.next=16,P.O.storage.from("menus").getPublicUrl("restaurant/"+n);case 16:if(i=r.sent,u=i.data,!(c=i.error)){r.next=21;break}throw c;case 21:if(u){r.next=23;break}throw new Error("update fail");case 23:return r.abrupt("return",u.publicURL);case 24:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){E(o,t,a,i,u,"next",r)}function u(r){E(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}(),_=n(41077);function M(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function L(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function T(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return M(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=function(r){var e=r.imageUrlCallback,n=T(a.useState(!1),2),o=n[0],c=n[1],l=T(a.useState(!1),2),s=l[0],f=l[1],m=(0,A.Z)(),h=m.recall,p=m.storageMenus,v=function(){return f(!1)},y=a.useCallback((function(r){(function(){var n,t=(n=d().mark((function n(){var t,a;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return c(!0),n.prev=3,n.next=7,N(null===(t=r.target.files)||void 0===t?void 0:t[0]);case 7:a=n.sent,v(),e(a),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),v();case 15:c(!1);case 16:case"end":return n.stop()}}),n,null,[[3,12]])})),function(){var r=this,e=arguments;return new Promise((function(t,a){var o=n.apply(r,e);function i(r){L(o,t,a,i,u,"next",r)}function u(r){L(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(){return t.apply(this,arguments)}})()()}),[o,e]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(S.Z,{variant:"outlined",onClick:function(){h(),f(!0)},children:"SELECT RESTARUANT IMAGE"}),(0,t.jsx)(O.Z,{open:s,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,t.jsxs)(i.Z,{className:"absolute top-1/2 left-1/2 h-[90%] w-[90%] -translate-y-1/2 -translate-x-1/2 overflow-y-auto rounded bg-white p-4 shadow-xl lg:h-[40rem] lg:max-h-[90%] lg:w-[60rem]",children:[(0,t.jsx)(b.Z,{className:"float-right",color:"primary","aria-label":"close modal",component:"span",onClick:v,children:(0,t.jsx)(Z.Z,{})}),(0,t.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,t.jsx)(u.ZP,{item:!0,xs:6,sm:4,md:3,children:(0,t.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,t.jsx)("input",{className:"hidden",accept:"image/jpeg, image/png, image/jpg",id:"contained-button-file",type:"file",onChange:y}),(0,t.jsx)(k.Z,{loading:o,className:"aspect-[3/4] w-full",variant:"outlined",component:"span",children:(0,t.jsx)(C.Z,{})})]})}),p.map((function(r){return(0,t.jsx)(u.ZP,{item:!0,xs:6,sm:4,md:3,children:(0,t.jsxs)(i.Z,{className:"w-full",children:[(0,t.jsx)(S.Z,{startIcon:(0,t.jsx)(I.Z,{}),onClick:function(){v(),e(r.publicURL)},children:"\u9078\u6211\uff01"}),(0,t.jsx)(i.Z,{className:"relative aspect-[3/4] w-full",children:(0,t.jsx)(_.Z,{priority:!0,src:r.publicURL,alt:r.name,layout:"fill"})})]})},"storage-menu-".concat(r.name))}))]})]})})]})};function U(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var q=function(){var r,e=(r=d().mark((function r(e){var n,t,a;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("createRestaurants restaurants: ",e),r.next=3,P.O.from("restaurants").insert(e);case 3:if(n=r.sent,t=n.data,!(a=n.error)){r.next=8;break}throw a;case 8:if(t){r.next=10;break}throw new Error("invalid restaurants");case 10:return r.abrupt("return",t);case 11:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){U(o,t,a,i,u,"next",r)}function u(r){U(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}();function D(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function $(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function B(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function F(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){B(r,e,n[e])}))}return r}function X(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return D(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var z=["name","telephone","address"],G=/^(\d{2,3}-?|\(\d{2,3}\))?\d{3,4}-?\d{4}|09\d{2}(\d{6}|-\d{3}-\d{3})$/,W=p.Ry().shape({hidden:p.Xg().transform((function(r){return!!r})),name:p.Z_().required("\u9700\u8981\u9910\u5ef3\u540d").min(2,"\u592a\u5c112~"),image_url:p.Z_().required("\u9700\u8981\u9910\u5ef3\u5716\u7247"),telephone:p.Vo((function(r){return r?p.Z_().matches(G,"Phone number is not valid"):p.Z_()})),address:p.Z_()}),V=function(){var r,e,n,o=X(a.useState(!1),2),c=o[0],s=o[1],f=(0,v.cI)({resolver:(0,y.X)(W)}),m=f.reset,p=f.register,S=f.setValue,O=f.watch,I=f.handleSubmit,C=f.formState.errors,A=X(O(["image_url"]),1)[0],P=a.useCallback((function(r){return S("image_url",r,{shouldValidate:!0})}),[S]),E=a.useMemo((function(){return A?(0,t.jsxs)(i.Z,{className:h()("relative m-auto mt-3 aspect-[3/4] w-[30%]"),children:[(0,t.jsx)(_.Z,{priority:!0,src:A,alt:"select-image-url",layout:"fill"}),(0,t.jsx)(b.Z,{className:"!absolute !top-0 !right-0 !translate-x-1/2 !-translate-y-1/2",onClick:function(){return S("image_url","")},children:(0,t.jsx)(Z.Z,{})})]}):(0,t.jsx)(R,{imageUrlCallback:P})}),[A,S,P]);return(0,t.jsx)(x.Z,{className:"p-2",children:(0,t.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,t.jsxs)(u.ZP,{className:"!my-auto flex flex-row",item:!0,xs:6,sm:5,md:5,children:[(0,t.jsx)(g.Z,F({size:"small",required:!0,id:"hidden"},p("hidden"))),(0,t.jsx)(w.Z,{children:z.map((function(r){var n;return(0,t.jsx)(l.Z,F({required:"name"===r,id:r,label:r,fullWidth:!0,variant:"standard"},p(r),{error:!!C[r],helperText:null!==(e=null===(n=C[r])||void 0===n?void 0:n.message)&&void 0!==e?e:" "}),"create-restaurant-form-".concat(r))}))})]}),(0,t.jsxs)(u.ZP,{className:"!my-auto flex flex-row",item:!0,xs:6,sm:5,md:5,children:[E,(0,t.jsx)(j.Z,{error:!0,children:null!==(n=null===(r=C.image_url)||void 0===r?void 0:r.message)&&void 0!==n?n:" "})]}),(0,t.jsx)(u.ZP,{className:"!my-auto",item:!0,xs:12,sm:2,md:2,children:(0,t.jsx)(k.Z,{loading:c,className:"xs:w-auto w-full",variant:"contained",onClick:I((function(r){(function(){var e,n=(e=d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return s(!0),e.prev=3,e.next=6,q([r]);case 6:m({hidden:!1,name:"",image_url:"",telephone:"",address:""}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("asyncCreateRestaurants error");case 12:s(!1);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})),function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function i(r){$(o,t,a,i,u,"next",r)}function u(r){$(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(){return n.apply(this,arguments)}})()()})),children:"CREATE"})})]})})},H=n(72882),J=n(7906),K=n(53184),Q=n(68509),Y=n(53252),rr=n(295),er=n(79305),nr=n(41622);function tr(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var ar=function(){var r,e=(r=d().mark((function r(e){var n,t,a,o,i;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.restaurantMenuList,t=e.restaurantId,r.next=3,P.O.from("menu_items").insert(n.menuItems.map((function(r){return{hidden:r.hidden,name:r.name,type:r.type,cost:r.cost,restaurant_id:t}})));case 3:if(a=r.sent,o=a.data,!a.error){r.next=8;break}throw new Error("insert menu_items error");case 8:if(i=null!==o&&void 0!==o?o:[]){r.next=11;break}throw new Error("invalid menuItems");case 11:if(i.length===n.menuItems.length){r.next=13;break}throw new Error("Something Error");case 13:return r.next=15,P.O.from("menu_item_options").insert(i.flatMap((function(r,e){return n.menuItems[e].menuItemOptions.map((function(e){return{name:e.name,type:"".concat(r.type,".").concat(r.name),cost:e.cost,restaurant_id:t,menu_item_id:r.id}}))})));case 15:if(!r.sent.error){r.next=19;break}throw new Error("insert menu_item_options error");case 19:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){tr(o,t,a,i,u,"next",r)}function u(r){tr(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}(),or=n(66242),ir=n(44267),ur=n(57922),cr=n(15861),lr=n(45111),sr=n(29217),fr=n(94895),dr=n(63205),mr=n(1895);function hr(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function pr(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){hr(r,e,n[e])}))}return r}var vr=function(r){var e,n=r.register,o=r.control,c=r.itemIndex,s=r.formState.errors,f=(0,v.Dq)({control:o,name:"menuItems.".concat(c,".menuItemOptions")}),d=f.fields,m=f.append,h=f.remove,p=a.useMemo((function(){return d.length>=10}),[d]),y=a.useCallback((function(){p||m({name:"",cost:0})}),[p,m]);return(0,t.jsxs)(i.Z,{children:[d.map((function(r,a){return(0,t.jsxs)(or.Z,{className:"ml-2 flex flex-row p-2",children:[(0,t.jsx)(u.ZP,{container:!0,spacing:1,children:mr.Sc.map((function(r){var o,i,f,d,m,h,p,v,y;return(0,t.jsx)(u.ZP,{item:!0,xs:6,children:(0,t.jsx)(l.Z,pr({required:r.required,label:r.label,type:r.type,fullWidth:!0,variant:"standard"},n("menuItems.".concat(c,".menuItemOptions.").concat(a,".").concat(r.key)),{error:!!(null===(o=s.menuItems)||void 0===o||null===(i=o[c])||void 0===i||null===(f=i.menuItemOptions)||void 0===f||null===(d=f[a])||void 0===d?void 0:d[r.key]),helperText:null!==(e=null===(m=s.menuItems)||void 0===m||null===(h=m[c])||void 0===h||null===(p=h.menuItemOptions)||void 0===p||null===(v=p[a])||void 0===v||null===(y=v[r.key])||void 0===y?void 0:y.message)&&void 0!==e?e:" "}))},"gird-menu-item-option.".concat(c,".menuItemOptions.").concat(a,".").concat(r.key))}))}),(0,t.jsx)(b.Z,{onClick:function(){return h(a)},children:(0,t.jsx)(fr.Z,{})})]},"menu-item-option-".concat(r.id))})),!p&&(0,t.jsx)(i.Z,{className:"flex justify-center p-4 ",children:(0,t.jsx)(b.Z,{onClick:y,children:(0,t.jsx)(dr.Z,{})})})]})};function yr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function br(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function xr(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){br(r,e,n[e])}))}return r}function gr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return yr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wr=function(r){var e,n=r.register,o=r.index,i=r.control,c=r.formState,s=r.removeButtonClick,f=void 0===s?nr.G1:s,d=gr(a.useState(!1),2),m=d[0],p=d[1],v=c.errors,y=a.useMemo((function(){var r,e;return!!(null===v||void 0===v||null===(r=v.menuItems)||void 0===r||null===(e=r[o])||void 0===e?void 0:e.menuItemOptions)}),[v,o]);return(0,t.jsxs)(or.Z,{children:[(0,t.jsxs)(ir.Z,{className:h()("flex flex-row whitespace-pre-wrap break-all"),children:[(0,t.jsxs)(x.Z,{className:"item-center flex flex-col justify-center",elevation:0,children:[(0,t.jsx)(b.Z,{size:"small",onClick:function(){return p((function(r){return!r}))},children:m?(0,t.jsx)(sr.Z,{}):(0,t.jsx)(lr.Z,{})}),(0,t.jsx)(j.Z,{error:!0,className:"!text-center",children:y?"*":" "})]}),(0,t.jsx)(g.Z,xr({size:"small",id:"hidden"},n("menuItems.".concat(o,".hidden")))),(0,t.jsx)(u.ZP,{container:!0,spacing:1,children:mr.SZ.map((function(r){var a,i,c,s,f;return(0,t.jsx)(u.ZP,{item:!0,xs:12,sm:4,children:(0,t.jsx)(l.Z,xr({required:r.required,label:r.label,type:r.type,fullWidth:!0,variant:"standard"},n("menuItems.".concat(o,".").concat(r.key)),{error:!!(null===(a=v.menuItems)||void 0===a||null===(i=a[o])||void 0===i?void 0:i[r.key]),helperText:null!==(e=null===(c=v.menuItems)||void 0===c||null===(s=c[o])||void 0===s||null===(f=s[r.key])||void 0===f?void 0:f.message)&&void 0!==e?e:" "}))},"gird-menu-items.".concat(o,".").concat(r.key))}))}),(0,t.jsx)(b.Z,{disabled:!o,onClick:f,className:h()(o?"opacity-100":"opacity-0"),children:(0,t.jsx)(fr.Z,{})})]}),(0,t.jsx)(ur.Z,{in:m,timeout:"auto",unmountOnExit:!0,children:(0,t.jsxs)(or.Z,{className:"m-2",children:[(0,t.jsx)(cr.Z,{variant:"h4",className:"p-2",children:"Options"}),(0,t.jsx)(vr,{register:n,control:i,itemIndex:o,formState:c})]})})]})},jr=function(r){var e=r.register,n=r.control,o=r.formState,u=(0,v.Dq)({control:n,name:"menuItems"}),c=u.fields,l=u.append,s=u.remove,f=a.useMemo((function(){return c.length>=10}),[c]),d=a.useCallback((function(){f||l({hidden:!1,name:"",cost:0,type:""})}),[f,l]);return(0,t.jsxs)(i.Z,{children:[c.map((function(r,a){return(0,t.jsx)(wr,{register:e,control:n,index:a,formState:o,removeButtonClick:function(){return s(a)}},"menu-items-".concat(r.id))})),!f&&(0,t.jsx)(i.Z,{className:"flex justify-center p-4 ",children:(0,t.jsx)(b.Z,{onClick:d,children:(0,t.jsx)(C.Z,{})})})]})};function kr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zr(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function Sr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return kr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Or={menuItems:[{hidden:!1,name:"",cost:0,type:"",menuItemOptions:[{name:"",cost:0}]}]},Ir=p.Ry().shape({menuItems:p.IX().of(p.Ry().shape({hidden:p.O7().required("Something Error"),name:p.Z_().required("\u4e0d\u53ef\u70ba\u7a7a").min(2,"\u592a\u5c112~"),cost:p.Rx().transform((function(r){if(!isNaN(r)&&r%5===0&&0!==r)return r})).positive('"\u6b63"\u6574\u6578').max(200,"\u592a\u80fd\u5403200!!").required("\u4f60\u61c25\u7684\u500d\u6578\uff1f"),type:p.Z_().when("menuItemOptions",{is:function(r){return Array.isArray(r)&&r.length>0},then:p.Z_().required("Required for Options").min(2,"\u592a\u5c112~")}),menuItemOptions:p.IX().of(p.Ry().shape({name:p.Z_().required("\u4e0d\u53ef\u70ba\u7a7a").min(2,"\u592a\u5c112~"),cost:p.Rx().transform((function(r){return isNaN(r)||r%5!==0?void 0:r})).required("\u4f60\u61c25\u7684\u500d\u6578\uff1f").positive('"\u6b63"\u6574\u6578').max(200,"\u592a\u80fd\u5403200!!")}))}))}),Cr=function(r){var e=r.restaurantId,n=Sr(a.useState(!1),2),o=n[0],u=n[1],c=(0,v.cI)({defaultValues:Or,resolver:(0,y.X)(Ir)}),l=c.control,s=c.reset,f=c.register,m=c.handleSubmit,h=c.formState;return(0,t.jsxs)(x.Z,{className:"p-2",children:[(0,t.jsx)(i.Z,{children:(0,t.jsx)(jr,{control:l,register:f,formState:h})}),(0,t.jsx)(k.Z,{loading:o,className:"xs:w-auto !mt-2 w-full",variant:"contained",type:"submit",onClick:m(function(){var r,n=(r=d().mark((function r(n){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!o){r.next=2;break}return r.abrupt("return");case 2:return u(!0),r.prev=3,r.next=6,ar({restaurantMenuList:n,restaurantId:e});case 6:return s(),r.next=9,(0,nr._v)(2e3);case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),console.log("asyncCreateRestaurantMenus error");case 14:u(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){Zr(o,t,a,i,u,"next",r)}function u(r){Zr(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return n.apply(this,arguments)}}()),children:"CREATE"})]})},Ar=function(r){var e=r.selectRestauramtMenu,n=r.clearCallback;return(0,t.jsxs)(x.Z,{className:"p-2",children:[(0,t.jsx)(S.Z,{onClick:function(){return n()},children:"Clear"}),(0,t.jsx)(i.Z,{children:"CreateSelectRestaurantMenuOptionListForm >> ".concat(e.id,".").concat(e.name)})]})},Pr=n(14564);function Er(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Nr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return Er(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Er(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _r=function(r){var e=r.restaurantMenu,n=r.selectCallback,o=Nr(a.useState(null),2),i=o[0],u=o[1],c=Boolean(i),l=c?"simple-popover":void 0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q.Z,{onClick:function(r){u(r.currentTarget)},role:"checkbox",tabIndex:-1,children:mr.wW.map((function(r){var n=e[r];return(0,t.jsx)(Y.Z,{children:n&&n.toString()},"Menu-item-schema-td-".concat(r))}))},"restaurant-menu-".concat(e.id)),(0,t.jsxs)(Pr.ZP,{id:l,open:c,anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"left"},children:[(0,t.jsx)(S.Z,{onClick:function(){u(null),null===n||void 0===n||n()},children:"Select"}),(0,t.jsx)(S.Z,{onClick:function(){u(null)},children:"Close"})]})]})};function Mr(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var Lr=function(){var r,e=(r=d().mark((function r(e){var n,t,a;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,P.O.from("menu_items").select().eq("restaurant_id",e);case 2:if(n=r.sent,t=n.data,!(a=n.error)){r.next=7;break}throw a;case 7:if(t){r.next=9;break}throw new Error("no menu_item list");case 9:return r.abrupt("return",t);case 10:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){Mr(o,t,a,i,u,"next",r)}function u(r){Mr(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}();function Tr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rr(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function Ur(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return Tr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var qr=function(){var r=Ur(a.useState(!1),2),e=r[0],n=r[1],t=a.useCallback((function(r){var t=r.asyncCallback,a=r.resultCallback;(function(){var r,o=(r=d().mark((function r(){var o;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=3;break}return a({blockByIsLoading:!0}),r.abrupt("return");case 3:return n(!0),r.prev=4,r.next=7,t();case 7:o=r.sent,a({blockByIsLoading:!1,result:o}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),a({blockByIsLoading:!1,error:r.t0});case 14:n(!1);case 15:case"end":return r.stop()}}),r,null,[[4,11]])})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){Rr(o,t,a,i,u,"next",r)}function u(r){Rr(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(){return o.apply(this,arguments)}})()()}),[e,n]);return{isLoading:e,doAsyncFetchData:t}},Dr=n(89664);function $r(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Br(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function Fr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||zr(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(r){return function(r){if(Array.isArray(r))return $r(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||zr(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(r,e){if(r){if("string"===typeof r)return $r(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(r,e):void 0}}var Gr=function(r){var e=Fr(a.useState(!0),2),n=e[0],t=e[1],o=Fr(a.useState([]),2),i=o[0],u=o[1],c=qr(),l=c.isLoading,s=c.doAsyncFetchData,f=a.useCallback((function(){var e=function(){var e,n=(e=d().mark((function e(){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Lr(r);case 3:n=e.sent,u(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function i(r){Br(o,t,a,i,u,"next",r)}function u(r){Br(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();s({asyncCallback:e,resultCallback:function(r){var e=r.blockByIsLoading;console.log("asyncFetchRestaurantMenuList blockByIsLoading: ",e)}})}),[r,s]);a.useEffect((function(){t(!1)}),[r]),a.useEffect((function(){n||(t(!0),f())}),[n,f]);var m=a.useCallback((function(e){if(!e.errors){var n=e.new;n&&n.restaurant_id===r&&u((function(r){return Xr(r).concat([n])}))}}),[r]),h=a.useCallback((function(r){var e;if(!r.errors){var n=null===(e=r.old)||void 0===e?void 0:e.id;if(n&&!(n<=0)){var t=r.new;t&&u((function(r){return r.map((function(r){return r.id===n?t:r}))}))}}}),[]),p=a.useCallback((function(r){var e;if(!r.errors){var n=null===(e=r.old)||void 0===e?void 0:e.id;n&&(n<=0||u((function(r){return r.filter((function(r){return r.id!==n}))})))}}),[]);return(0,Dr.Z)({path:"menu_items",insertCallback:m,updateCallback:h,deleteCallback:p}),{isLoading:l,restaurantMenus:i}};function Wr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return Wr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Hr=function(r){var e=r.restaurantId,n=Vr(a.useState(0),2),o=n[0],u=n[1],c=Vr(a.useState(5),2),l=c[0],s=c[1],f=Vr(a.useState(void 0),2),d=f[0],m=f[1],h=Gr(e),p=h.isLoading,v=h.restaurantMenus;return p?(0,t.jsx)(i.Z,{children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Z,{className:"w-full overflow-hidden",children:[(0,t.jsx)(H.Z,{className:"max-h-[28rem]",children:(0,t.jsxs)(J.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,t.jsx)(K.Z,{children:(0,t.jsx)(Q.Z,{children:mr.wW.map((function(r){return(0,t.jsx)(Y.Z,{children:r},"Menu-item-schema-tr-".concat(r))}))})}),(0,t.jsx)(rr.Z,{children:v.slice(o*l,o*l+l).map((function(r){return(0,t.jsx)(_r,{restaurantMenu:r,selectCallback:function(){return m(r)}},"restaurant-menu-".concat(r.id))}))})]})}),(0,t.jsx)(er.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:v.length,rowsPerPage:l,page:o,onPageChange:function(r,e){u(e)},onRowsPerPageChange:function(r){s(+r.target.value),u(0)}})]}),(0,t.jsx)(i.Z,{mt:2,children:d?(0,t.jsx)(Ar,{selectRestauramtMenu:d,clearCallback:function(){return m(void 0)}}):(0,t.jsx)(Cr,{restaurantId:e})})]})};function Jr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Kr(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Qr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return Jr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Yr=function(){var r=Qr(a.useState(null),2),e=r[0],n=r[1],o=(0,s.Z)(),f=o.isInit,d=o.isLoading,m=o.error,h=o.restaurants;return f||d?(0,t.jsx)(i.Z,{children:"Loading..."}):m?(0,t.jsx)(i.Z,{children:"get Error"}):(0,t.jsx)(i.Z,{children:(0,t.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,t.jsx)(u.ZP,{className:"!my-auto",item:!0,xs:8,children:(0,t.jsx)(c.Z,{onChange:function(r,e){return n(e)},value:e,disablePortal:!0,id:"choose-restaurant",options:h,getOptionLabel:function(r){return"".concat(r.id," ").concat(r.name)},renderInput:function(r){return(0,t.jsx)(l.Z,function(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){Kr(r,e,n[e])}))}return r}({},r,{label:"restaurant"}))}})}),e?(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(Hr,{restaurantId:e.id})}):(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(V,{})})]})})},re=function(){return(0,t.jsx)(o.Z,{children:(0,t.jsx)(Yr,{})})}},1364:function(r,e,n){"use strict";var t=n(34051),a=n.n(t),o=n(53298);function i(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var u=function(){var r,e=(r=a().mark((function r(){var e,n,t;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.O.from("restaurants").select();case 2:if(e=r.sent,n=e.data,!(t=e.error)){r.next=7;break}throw t;case 7:if(n){r.next=9;break}throw new Error("no restaurant list");case 9:return r.abrupt("return",n);case 10:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function u(r){i(o,t,a,u,c,"next",r)}function c(r){i(o,t,a,u,c,"throw",r)}u(void 0)}))});return function(){return e.apply(this,arguments)}}();e.Z=u},40101:function(r,e,n){"use strict";var t=n(67294),a=n(1364),o=n(70301),i=n(89664);function u(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function c(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||s(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(r){return function(r){if(Array.isArray(r))return u(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||s(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(r,e){if(r){if("string"===typeof r)return u(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(r,e):void 0}}e.Z=function(){var r=c(t.useState([]),2),e=r[0],n=r[1],u=(0,o.Z)({asyncCallback:a.Z}),s=u.isInit,f=u.isLoading,d=u.error,m=u.recall,h=u.result,p=t.useCallback((function(r){if(!r.errors){var t=r.new;t&&n(l(e).concat([t]))}}),[e]),v=t.useCallback((function(r){var t;if(!r.errors){var a=null===(t=r.old)||void 0===t?void 0:t.id;if(a&&!(a<=0)){var o=r.new;if(o){var i=e.map((function(r){return r.id===a?o:r}));n(i)}}}}),[e]),y=t.useCallback((function(r){var t;if(!r.errors){var a=null===(t=r.old)||void 0===t?void 0:t.id;a&&(a<=0||n(e.filter((function(r){return r.id!==a}))))}}),[e]);return(0,i.Z)({path:"restaurants",insertCallback:p,updateCallback:v,deleteCallback:y}),t.useEffect((function(){n(h||[])}),[h]),{isInit:s,isLoading:f,error:d,recall:m,restaurants:e}}},71676:function(r,e,n){"use strict";n.d(e,{Z:function(){return f}});var t=n(67294),a=n(34051),o=n.n(a),i=n(53298);function u(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function c(r){return function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){u(o,t,a,i,c,"next",r)}function c(r){u(o,t,a,i,c,"throw",r)}i(void 0)}))}}var l=function(){var r=c(o().mark((function r(){var e,n,t,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.O.storage.from("menus").list("restaurant");case 2:if(e=r.sent,n=e.data,!(t=e.error)){r.next=7;break}throw t;case 7:if(n){r.next=9;break}throw new Error("no menus");case 9:return r.next=11,Promise.all(n.map(function(){var r=c(o().mark((function r(e){var n,t,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.name){r.next=2;break}throw new Error("no menu name");case 2:return r.next=4,i.O.storage.from("menus").getPublicUrl("restaurant/"+e.name);case 4:if(n=r.sent,t=n.data,!(a=n.error)){r.next=9;break}throw a;case 9:if(t){r.next=11;break}throw new Error("no publicUrl");case 11:return r.abrupt("return",{id:e.id,name:e.name,publicURL:t.publicURL});case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()));case 11:return a=r.sent,r.abrupt("return",a);case 13:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),s=n(70301),f=function(){var r=(0,s.Z)({asyncCallback:l,customErrorCallback:function(){return new Error("Custom")}}),e=r.isInit,n=r.isLoading,a=r.error,o=r.result,i=r.recall;return{isInit:e,isLoading:n,error:a,storageMenus:t.useMemo((function(){return o||[]}),[o]),recall:i}}},89664:function(r,e,n){"use strict";var t=n(67294),a=n(53298),o=n(41622);e.Z=function(r){var e=r.path,n=r.insertCallback,i=void 0===n?o.G1:n,u=r.updateCallback,c=void 0===u?o.G1:u,l=r.deleteCallback,s=void 0===l?o.G1:l;return t.useEffect((function(){var r=a.O.from(e).on("INSERT",i).on("UPDATE",c).on("DELETE",s).subscribe();return function(){a.O.removeSubscription(r)}}),[e,i,c,s]),{}}}},function(r){r.O(0,[643,954,326,122,726,411,436,404,774,888,179],(function(){return e=82388,r(r.s=e);var e}));var e=r.O();_N_E=e}]);