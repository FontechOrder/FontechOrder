(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[188],{2388:function(r,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/new-menu",function(){return n(2355)}])},1077:function(r,e,n){"use strict";var t=n(5893),a=(n(7294),n(5675)),o=n(1714);function i(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function u(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){i(r,e,n[e])}))}return r}function c(r,e){if(null==r)return{};var n,t,a=function(r,e){if(null==r)return{};var n,t,a={},o=Object.keys(r);for(t=0;t<o.length;t++)n=o[t],e.indexOf(n)>=0||(a[n]=r[n]);return a}(r,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(t=0;t<o.length;t++)n=o[t],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(r,n)&&(a[n]=r[n])}return a}e.Z=function(r){var e=r.alt,n=void 0===e?"zoom-image":e,i=c(r,["alt"]);return(0,t.jsx)(o.Z,{wrapStyle:{width:"100%",height:"100%"},children:(0,t.jsx)("div",{className:"relative h-full w-full",children:(0,t.jsx)(a.default,u({},i,{alt:n}))})})}},4607:function(r,e,n){"use strict";var t=n(5893),a=n(7294),o=n(6822),i=n(6242),u=n(4229),c=n(5811);e.Z=function(r){var e=r.children,n=(0,c.Z)(),l=n.isInit,s=n.adminUser,f=a.useMemo((function(){return l?(0,t.jsx)(o.Z,{children:"Init..."}):s?e:(0,t.jsx)(o.Z,{children:"404!"})}),[l,s,e]);return(0,t.jsx)(i.Z,{header:(0,t.jsx)(u.Z,{}),children:(0,t.jsx)(o.Z,{m:2,children:f})})}},301:function(r,e,n){"use strict";var t=n(7294),a=n(3869);function o(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function i(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return o(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}e.Z=function(r){var e=r.asyncCallback,n=r.customErrorCallback,o=i(t.useState(!0),2),u=o[0],c=o[1],l=t.useCallback((function(){return e}),[e]),s=(0,a.Z)({asyncCallback:l(),customErrorCallback:n}),f=s.isLoading,m=s.error,d=s.result,v=s.recall,p=s.fetchData,h=t.useCallback((function(){p({finishCallBack:function(){c(!1)}})}),[p]),y=t.useCallback((function(){return!u&&v()}),[u,v]);return t.useEffect((function(){u&&(f||h())}),[u,f,h]),t.useEffect((function(){u||h()}),[u,h]),{isInit:u,setIsInit:c,isLoading:f,error:m,result:d,recall:y}}},2355:function(r,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Kr}});var t=n(5893),a=n(7294),o=n(4607),i=n(6822),u=n(6886),c=n(52),l=n(7798),s=n(101),f=n(4051),m=n.n(f),d=n(4184),v=n.n(d),p=n(4231),h=n(7536),y=n(5496),b=n(3946),x=n(5113),g=n(9368),w=n(6815),j=n(5759),k=n(594),Z=n(3321),S=n(4648),O=n(7036),I=n(6540),C=n(1676),A=n(3298);function P(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var E=function(){var r,e=(r=m().mark((function r(e){var n,t,a,o,i,u,c;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}throw new Error("no input");case 2:if(n=e.name){r.next=5;break}throw new Error("no fileName");case 5:return r.next=7,A.O.storage.from("menus").upload("restaurant/"+n,e);case 7:if(t=r.sent,a=t.data,!(o=t.error)){r.next=12;break}throw o;case 12:if(a){r.next=14;break}throw new Error("update fail");case 14:return r.next=16,A.O.storage.from("menus").getPublicUrl("restaurant/"+n);case 16:if(i=r.sent,u=i.data,!(c=i.error)){r.next=21;break}throw c;case 21:if(u){r.next=23;break}throw new Error("update fail");case 23:return r.abrupt("return",u.publicURL);case 24:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){P(o,t,a,i,u,"next",r)}function u(r){P(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}(),N=n(1077);function _(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function M(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function L(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return _(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T=function(r){var e=r.imageUrlCallback,n=L(a.useState(!1),2),o=n[0],c=n[1],l=L(a.useState(!1),2),s=l[0],f=l[1],d=(0,C.Z)(),v=d.recall,p=d.storageMenus,h=function(){return f(!1)},y=a.useCallback((function(r){(function(){var n,t=(n=m().mark((function n(){var t,a;return m().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!o){n.next=2;break}return n.abrupt("return");case 2:return c(!0),n.prev=3,n.next=7,E(null===(t=r.target.files)||void 0===t?void 0:t[0]);case 7:a=n.sent,h(),e(a),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(3),h();case 15:c(!1);case 16:case"end":return n.stop()}}),n,null,[[3,12]])})),function(){var r=this,e=arguments;return new Promise((function(t,a){var o=n.apply(r,e);function i(r){M(o,t,a,i,u,"next",r)}function u(r){M(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(){return t.apply(this,arguments)}})()()}),[o,e]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Z.Z,{variant:"outlined",onClick:function(){v(),f(!0)},children:"SELECT RESTARUANT IMAGE"}),(0,t.jsx)(S.Z,{open:s,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,t.jsxs)(i.Z,{className:"absolute top-1/2 left-1/2 h-[90%] w-[90%] -translate-y-1/2 -translate-x-1/2 overflow-y-auto rounded bg-white p-4 shadow-xl lg:h-[40rem] lg:max-h-[90%] lg:w-[60rem]",children:[(0,t.jsx)(b.Z,{className:"float-right",color:"primary","aria-label":"close modal",component:"span",onClick:h,children:(0,t.jsx)(k.Z,{})}),(0,t.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,t.jsx)(u.ZP,{item:!0,xs:6,sm:4,md:3,children:(0,t.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,t.jsx)("input",{className:"hidden",accept:"image/jpeg, image/png, image/jpg",id:"contained-button-file",type:"file",onChange:y}),(0,t.jsx)(j.Z,{loading:o,className:"aspect-[3/4] w-full",variant:"outlined",component:"span",children:(0,t.jsx)(I.Z,{})})]})}),p.map((function(r){return(0,t.jsx)(u.ZP,{item:!0,xs:6,sm:4,md:3,children:(0,t.jsxs)(i.Z,{className:"w-full",children:[(0,t.jsx)(Z.Z,{startIcon:(0,t.jsx)(O.Z,{}),onClick:function(){h(),e(r.publicURL)},children:"\u9078\u6211\uff01"}),(0,t.jsx)(i.Z,{className:"relative aspect-[3/4] w-full",children:(0,t.jsx)(N.Z,{priority:!0,src:r.publicURL,alt:r.name,layout:"fill"})})]})},"storage-menu-".concat(r.name))}))]})]})})]})};function R(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var U=function(){var r,e=(r=m().mark((function r(e){var n,t,a;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,A.O.from("restaurants").insert(e);case 2:if(n=r.sent,t=n.data,!(a=n.error)){r.next=7;break}throw a;case 7:if(t){r.next=9;break}throw new Error("invalid restaurants");case 9:return r.abrupt("return",t);case 10:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){R(o,t,a,i,u,"next",r)}function u(r){R(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}();function q(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function D(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function $(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function B(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){$(r,e,n[e])}))}return r}function F(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return q(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var X=p.Ry().shape({hidden:p.Xg().transform((function(r){return!!r})),name:p.Z_().required("\u9700\u8981\u9910\u5ef3\u540d").min(2,"\u592a\u5c112~"),image_url:p.Z_().required("\u9700\u8981\u9910\u5ef3\u5716\u7247")}),z=function(){var r,e,n,o,c=F(a.useState(!1),2),s=c[0],f=c[1],d=(0,h.cI)({resolver:(0,y.X)(X)}),p=d.reset,Z=d.register,S=d.setValue,O=d.watch,I=d.handleSubmit,C=d.formState.errors,A=F(O(["image_url"]),1)[0],P=a.useCallback((function(r){return S("image_url",r,{shouldValidate:!0})}),[S]),E=a.useMemo((function(){return A?(0,t.jsxs)(i.Z,{className:v()("relative m-auto mt-3 aspect-[3/4] w-[30%]"),children:[(0,t.jsx)(N.Z,{priority:!0,src:A,alt:"select-image-url",layout:"fill"}),(0,t.jsx)(b.Z,{className:"!absolute !top-0 !right-0 !translate-x-1/2 !-translate-y-1/2",onClick:function(){return S("image_url","")},children:(0,t.jsx)(k.Z,{})})]}):(0,t.jsx)(T,{imageUrlCallback:P})}),[A,S,P]);return(0,t.jsx)(x.Z,{className:"p-2",children:(0,t.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,t.jsxs)(u.ZP,{className:"!my-auto flex flex-row",item:!0,xs:6,sm:5,md:5,children:[(0,t.jsx)(g.Z,B({size:"small",required:!0,id:"hidden"},Z("hidden"))),(0,t.jsx)(l.Z,B({required:!0,id:"name",fullWidth:!0,variant:"standard"},Z("name"),{error:!!C.name,helperText:null!==(n=null===(r=C.name)||void 0===r?void 0:r.message)&&void 0!==n?n:" "}))]}),(0,t.jsxs)(u.ZP,{className:"!my-auto flex flex-row",item:!0,xs:6,sm:5,md:5,children:[E,(0,t.jsx)(w.Z,{error:!0,children:null!==(o=null===(e=C.image_url)||void 0===e?void 0:e.message)&&void 0!==o?o:" "})]}),(0,t.jsx)(u.ZP,{className:"!my-auto",item:!0,xs:12,sm:2,md:2,children:(0,t.jsx)(j.Z,{loading:s,className:"xs:w-auto w-full",variant:"contained",onClick:I((function(r){(function(){var e,n=(e=m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=2;break}return e.abrupt("return");case 2:return f(!0),e.prev=3,e.next=6,U([r]);case 6:if(e.sent[0]){e.next=10;break}throw new Error("Invalid Restaurant");case 10:p({hidden:!1,name:"",image_url:""}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.log("asyncCreateRestaurants error");case 16:f(!1);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})),function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function i(r){D(o,t,a,i,u,"next",r)}function u(r){D(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(){return n.apply(this,arguments)}})()()})),children:"CREATE"})})]})})},G=n(2882),W=n(7906),V=n(3184),H=n(8509),J=n(3252),K=n(295),Q=n(9305),Y=n(1622);function rr(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var er=function(){var r,e=(r=m().mark((function r(e){var n,t,a,o,i,u,c;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.restaurantMenuList,t=e.restaurantId,r.next=3,A.O.from("menu_items").insert(n.menuItems.map((function(r){return{hidden:r.hidden,name:r.name,type:r.type,cost:r.cost,restaurant:t}})));case 3:if(a=r.sent,o=a.data,!a.error){r.next=8;break}throw new Error("insert menu_items error");case 8:if(i=null!==o&&void 0!==o?o:[]){r.next=11;break}throw new Error("invalid menuItems");case 11:if(i.length===n.menuItems.length){r.next=13;break}throw new Error("Something Error");case 13:return r.next=15,A.O.from("menu_item_options").insert(i.flatMap((function(r,e){return n.menuItems[e].menuItemOptions.map((function(e){return{name:e.name,type:"".concat(r.type,".").concat(r.name),cost:e.cost,restaurant:t,menu_item:r.id}}))})));case 15:if(u=r.sent,c=u.data,!u.error){r.next=20;break}throw new Error("insert menu_item_options error");case 20:if(null===c||void 0===c||c){r.next=23;break}throw new Error("invalid menuItemOptions");case 23:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){rr(o,t,a,i,u,"next",r)}function u(r){rr(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}(),nr=n(1024),tr=n(4267),ar=n(7922),or=n(5861),ir=n(5111),ur=n(9217),cr=n(4895),lr=n(3205),sr=n(1895);function fr(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function mr(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){fr(r,e,n[e])}))}return r}var dr=function(r){var e,n=r.register,o=r.control,c=r.itemIndex,s=r.formState.errors,f=(0,h.Dq)({control:o,name:"menuItems.".concat(c,".menuItemOptions")}),m=f.fields,d=f.append,v=f.remove,p=a.useMemo((function(){return m.length>=10}),[m]),y=a.useCallback((function(){p||d({name:"",cost:0})}),[p,d]);return(0,t.jsxs)(i.Z,{children:[m.map((function(r,a){return(0,t.jsxs)(nr.Z,{className:"ml-2 flex flex-row p-2",children:[(0,t.jsx)(u.ZP,{container:!0,spacing:1,children:sr.Sc.map((function(r){var o,i,f,m,d,v,p,h,y;return(0,t.jsx)(u.ZP,{item:!0,xs:6,children:(0,t.jsx)(l.Z,mr({required:r.required,label:r.label,type:r.type,fullWidth:!0,variant:"standard"},n("menuItems.".concat(c,".menuItemOptions.").concat(a,".").concat(r.key)),{error:!!(null===(o=s.menuItems)||void 0===o||null===(i=o[c])||void 0===i||null===(f=i.menuItemOptions)||void 0===f||null===(m=f[a])||void 0===m?void 0:m[r.key]),helperText:null!==(e=null===(d=s.menuItems)||void 0===d||null===(v=d[c])||void 0===v||null===(p=v.menuItemOptions)||void 0===p||null===(h=p[a])||void 0===h||null===(y=h[r.key])||void 0===y?void 0:y.message)&&void 0!==e?e:" "}))},"gird-menu-item-option.".concat(c,".menuItemOptions.").concat(a,".").concat(r.key))}))}),(0,t.jsx)(b.Z,{onClick:function(){return v(a)},children:(0,t.jsx)(cr.Z,{})})]},"menu-item-option-".concat(r.id))})),!p&&(0,t.jsx)(i.Z,{className:"flex justify-center p-4 ",children:(0,t.jsx)(b.Z,{onClick:y,children:(0,t.jsx)(lr.Z,{})})})]})};function vr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function pr(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function hr(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){pr(r,e,n[e])}))}return r}function yr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return vr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var br=function(r){var e,n=r.register,o=r.index,i=r.control,c=r.formState,s=r.removeButtonClick,f=void 0===s?Y.G1:s,m=yr(a.useState(!1),2),d=m[0],p=m[1],h=c.errors,y=a.useMemo((function(){var r,e;return!!(null===h||void 0===h||null===(r=h.menuItems)||void 0===r||null===(e=r[o])||void 0===e?void 0:e.menuItemOptions)}),[h,o]);return(0,t.jsxs)(nr.Z,{children:[(0,t.jsxs)(tr.Z,{className:v()("flex flex-row whitespace-pre-wrap break-all"),children:[(0,t.jsxs)(x.Z,{className:"item-center flex flex-col justify-center",elevation:0,children:[(0,t.jsx)(b.Z,{size:"small",onClick:function(){return p((function(r){return!r}))},children:d?(0,t.jsx)(ur.Z,{}):(0,t.jsx)(ir.Z,{})}),(0,t.jsx)(w.Z,{error:!0,className:"!text-center",children:y?"*":" "})]}),(0,t.jsx)(g.Z,hr({size:"small",id:"hidden"},n("menuItems.".concat(o,".hidden")))),(0,t.jsx)(u.ZP,{container:!0,spacing:1,children:sr.SZ.map((function(r){var a,i,c,s,f;return(0,t.jsx)(u.ZP,{item:!0,xs:12,sm:4,children:(0,t.jsx)(l.Z,hr({required:r.required,label:r.label,type:r.type,fullWidth:!0,variant:"standard"},n("menuItems.".concat(o,".").concat(r.key)),{error:!!(null===(a=h.menuItems)||void 0===a||null===(i=a[o])||void 0===i?void 0:i[r.key]),helperText:null!==(e=null===(c=h.menuItems)||void 0===c||null===(s=c[o])||void 0===s||null===(f=s[r.key])||void 0===f?void 0:f.message)&&void 0!==e?e:" "}))},"gird-menu-items.".concat(o,".").concat(r.key))}))}),(0,t.jsx)(b.Z,{disabled:!o,onClick:f,className:v()(o?"opacity-100":"opacity-0"),children:(0,t.jsx)(cr.Z,{})})]}),(0,t.jsx)(ar.Z,{in:d,timeout:"auto",unmountOnExit:!0,children:(0,t.jsxs)(nr.Z,{className:"m-2",children:[(0,t.jsx)(or.Z,{variant:"h4",className:"p-2",children:"Options"}),(0,t.jsx)(dr,{register:n,control:i,itemIndex:o,formState:c})]})})]})},xr=function(r){var e=r.register,n=r.control,o=r.formState,u=(0,h.Dq)({control:n,name:"menuItems"}),c=u.fields,l=u.append,s=u.remove,f=a.useMemo((function(){return c.length>=10}),[c]),m=a.useCallback((function(){f||l({hidden:!1,name:"",cost:0,type:""})}),[f,l]);return(0,t.jsxs)(i.Z,{children:[c.map((function(r,a){return(0,t.jsx)(br,{register:e,control:n,index:a,formState:o,removeButtonClick:function(){return s(a)}},"menu-items-".concat(r.id))})),!f&&(0,t.jsx)(i.Z,{className:"flex justify-center p-4 ",children:(0,t.jsx)(b.Z,{onClick:m,children:(0,t.jsx)(I.Z,{})})})]})};function gr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function wr(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function jr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return gr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var kr={menuItems:[{hidden:!1,name:"",cost:0,type:"",menuItemOptions:[{name:"",cost:0}]}]},Zr=p.Ry().shape({menuItems:p.IX().of(p.Ry().shape({hidden:p.O7().required("Something Error"),name:p.Z_().required("\u4e0d\u53ef\u70ba\u7a7a").min(2,"\u592a\u5c112~"),cost:p.Rx().transform((function(r){if(!isNaN(r)&&r%5===0&&0!==r)return r})).positive('"\u6b63"\u6574\u6578').max(200,"\u592a\u80fd\u5403200!!").required("\u4f60\u61c25\u7684\u500d\u6578\uff1f"),type:p.Z_().when("menuItemOptions",{is:function(r){return Array.isArray(r)&&r.length>0},then:p.Z_().required("Required for Options").min(2,"\u592a\u5c112~")}),menuItemOptions:p.IX().of(p.Ry().shape({name:p.Z_().required("\u4e0d\u53ef\u70ba\u7a7a").min(2,"\u592a\u5c112~"),cost:p.Rx().transform((function(r){return isNaN(r)||r%5!==0?void 0:r})).required("\u4f60\u61c25\u7684\u500d\u6578\uff1f").positive('"\u6b63"\u6574\u6578').max(200,"\u592a\u80fd\u5403200!!")}))}))}),Sr=function(r){var e=r.restaurantId,n=jr(a.useState(!1),2),o=n[0],u=n[1],c=(0,h.cI)({defaultValues:kr,resolver:(0,y.X)(Zr)}),l=c.control,s=c.reset,f=c.register,d=c.handleSubmit,v=c.formState;return(0,t.jsxs)(x.Z,{className:"p-2",children:[(0,t.jsx)(i.Z,{children:(0,t.jsx)(xr,{control:l,register:f,formState:v})}),(0,t.jsx)(j.Z,{loading:o,className:"xs:w-auto !mt-2 w-full",variant:"contained",type:"submit",onClick:d(function(){var r,n=(r=m().mark((function r(n){return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!o){r.next=2;break}return r.abrupt("return");case 2:return u(!0),r.prev=3,r.next=6,er({restaurantMenuList:n,restaurantId:e});case 6:return s(),r.next=9,(0,Y._v)(2e3);case 9:r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),console.log("asyncCreateRestaurants error");case 14:u(!1);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){wr(o,t,a,i,u,"next",r)}function u(r){wr(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return n.apply(this,arguments)}}()),children:"CREATE"})]})},Or=function(r){var e=r.selectRestauramtMenu,n=r.clearCallback;return(0,t.jsxs)(x.Z,{className:"p-2",children:[(0,t.jsx)(Z.Z,{onClick:function(){return n()},children:"Clear"}),(0,t.jsx)(i.Z,{children:"CreateSelectRestaurantMenuOptionListForm >> ".concat(e.id,".").concat(e.name)})]})},Ir=n(4564);function Cr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ar(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return Cr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Pr=function(r){var e=r.restaurantMenu,n=r.selectCallback,o=Ar(a.useState(null),2),i=o[0],u=o[1],c=Boolean(i),l=c?"simple-popover":void 0;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H.Z,{onClick:function(r){u(r.currentTarget)},role:"checkbox",tabIndex:-1,children:sr.wW.map((function(r){var n=e[r];return(0,t.jsx)(J.Z,{children:n&&n.toString()},"Menu-item-schema-td-".concat(r))}))},"restaurant-menu-".concat(e.id)),(0,t.jsxs)(Ir.ZP,{id:l,open:c,anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"left"},children:[(0,t.jsx)(Z.Z,{onClick:function(){u(null),null===n||void 0===n||n()},children:"Select"}),(0,t.jsx)(Z.Z,{onClick:function(){u(null)},children:"Close"})]})]})};function Er(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var Nr=function(){var r,e=(r=m().mark((function r(e){var n,t,a;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,A.O.from("menu_items").select().eq("restaurant",e);case 2:if(n=r.sent,t=n.data,!(a=n.error)){r.next=7;break}throw a;case 7:if(t){r.next=9;break}throw new Error("no menu_item list");case 9:return r.abrupt("return",t);case 10:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){Er(o,t,a,i,u,"next",r)}function u(r){Er(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(r){return e.apply(this,arguments)}}();function _r(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Mr(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function Lr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return _r(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Tr=function(){var r=Lr(a.useState(!1),2),e=r[0],n=r[1],t=a.useCallback((function(r){var t=r.asyncCallback,a=r.resultCallback;(function(){var r,o=(r=m().mark((function r(){var o;return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e){r.next=3;break}return a({blockByIsLoading:!0}),r.abrupt("return");case 3:return n(!0),r.prev=4,r.next=7,t();case 7:o=r.sent,a({blockByIsLoading:!1,result:o}),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(4),a({blockByIsLoading:!1,error:r.t0});case 14:n(!1);case 15:case"end":return r.stop()}}),r,null,[[4,11]])})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){Mr(o,t,a,i,u,"next",r)}function u(r){Mr(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(){return o.apply(this,arguments)}})()()}),[e,n]);return{isLoading:e,doAsyncFetchData:t}},Rr=n(9664);function Ur(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function qr(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function Dr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||Br(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(r){return function(r){if(Array.isArray(r))return Ur(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||Br(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(r,e){if(r){if("string"===typeof r)return Ur(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ur(r,e):void 0}}var Fr=function(r){var e=Dr(a.useState(!0),2),n=e[0],t=e[1],o=Dr(a.useState([]),2),i=o[0],u=o[1],c=Tr(),l=c.isLoading,s=c.doAsyncFetchData,f=a.useCallback((function(){var e=function(){var e,n=(e=m().mark((function e(){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nr(r);case 3:n=e.sent,u(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var r=this,n=arguments;return new Promise((function(t,a){var o=e.apply(r,n);function i(r){qr(o,t,a,i,u,"next",r)}function u(r){qr(o,t,a,i,u,"throw",r)}i(void 0)}))});return function(){return n.apply(this,arguments)}}();s({asyncCallback:e,resultCallback:function(r){var e=r.blockByIsLoading;console.log("asyncFetchRestaurantMenuList blockByIsLoading: ",e)}})}),[r,s]);a.useEffect((function(){t(!1)}),[r]),a.useEffect((function(){n||(t(!0),f())}),[n,f]);var d=a.useCallback((function(e){if(!e.errors){var n=e.new;n&&n.restaurant===r&&u((function(r){return $r(r).concat([n])}))}}),[r]),v=a.useCallback((function(r){var e;if(!r.errors){var n=null===(e=r.old)||void 0===e?void 0:e.id;if(n&&!(n<=0)){var t=r.new;t&&u((function(r){return r.map((function(r){return r.id===n?t:r}))}))}}}),[]),p=a.useCallback((function(r){var e;if(!r.errors){var n=null===(e=r.old)||void 0===e?void 0:e.id;n&&(n<=0||u((function(r){return r.filter((function(r){return r.id!==n}))})))}}),[]);return(0,Rr.Z)({path:"menu_items",insertCallback:d,updateCallback:v,deleteCallback:p}),{isLoading:l,restaurantMenus:i}};function Xr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return Xr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Gr=function(r){var e=r.restaurantId,n=zr(a.useState(0),2),o=n[0],u=n[1],c=zr(a.useState(5),2),l=c[0],s=c[1],f=zr(a.useState(void 0),2),m=f[0],d=f[1],v=Fr(e),p=v.isLoading,h=v.restaurantMenus;return p?(0,t.jsx)(i.Z,{children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Z,{className:"w-full overflow-hidden",children:[(0,t.jsx)(G.Z,{className:"max-h-[28rem]",children:(0,t.jsxs)(W.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,t.jsx)(V.Z,{children:(0,t.jsx)(H.Z,{children:sr.wW.map((function(r){return(0,t.jsx)(J.Z,{children:r},"Menu-item-schema-tr-".concat(r))}))})}),(0,t.jsx)(K.Z,{children:h.slice(o*l,o*l+l).map((function(r){return(0,t.jsx)(Pr,{restaurantMenu:r,selectCallback:function(){return d(r)}},"restaurant-menu-".concat(r.id))}))})]})}),(0,t.jsx)(Q.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:h.length,rowsPerPage:l,page:o,onPageChange:function(r,e){u(e)},onRowsPerPageChange:function(r){s(+r.target.value),u(0)}})]}),(0,t.jsx)(i.Z,{mt:2,children:m?(0,t.jsx)(Or,{selectRestauramtMenu:m,clearCallback:function(){return d(void 0)}}):(0,t.jsx)(Sr,{restaurantId:e})})]})};function Wr(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vr(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Hr(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||function(r,e){if(!r)return;if("string"===typeof r)return Wr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Jr=function(){var r=Hr(a.useState(null),2),e=r[0],n=r[1],o=(0,s.Z)(),f=o.isInit,m=o.isLoading,d=o.error,v=o.restaurants;return f||m?(0,t.jsx)(i.Z,{children:"Loading..."}):d?(0,t.jsx)(i.Z,{children:"get Error"}):(0,t.jsx)(i.Z,{children:(0,t.jsxs)(u.ZP,{container:!0,spacing:1,children:[(0,t.jsx)(u.ZP,{className:"!my-auto",item:!0,xs:8,children:(0,t.jsx)(c.Z,{onChange:function(r,e){return n(e)},value:e,disablePortal:!0,id:"choose-restaurant",options:v,getOptionLabel:function(r){return"".concat(r.id," ").concat(r.name)},renderInput:function(r){return(0,t.jsx)(l.Z,function(r){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})))),t.forEach((function(e){Vr(r,e,n[e])}))}return r}({},r,{label:"restaurant"}))}})}),e?(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(Gr,{restaurantId:e.id})}):(0,t.jsx)(u.ZP,{item:!0,xs:12,children:(0,t.jsx)(z,{})})]})})},Kr=function(){return(0,t.jsx)(o.Z,{children:(0,t.jsx)(Jr,{})})}},1364:function(r,e,n){"use strict";var t=n(4051),a=n.n(t),o=n(3298);function i(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}var u=function(){var r,e=(r=a().mark((function r(){var e,n,t;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.O.from("restaurants").select();case 2:if(e=r.sent,n=e.data,!(t=e.error)){r.next=7;break}throw t;case 7:if(n){r.next=9;break}throw new Error("no restaurant list");case 9:return r.abrupt("return",n);case 10:case"end":return r.stop()}}),r)})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function u(r){i(o,t,a,u,c,"next",r)}function c(r){i(o,t,a,u,c,"throw",r)}u(void 0)}))});return function(){return e.apply(this,arguments)}}();e.Z=u},101:function(r,e,n){"use strict";var t=n(7294),a=n(1364),o=n(301),i=n(9664);function u(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function c(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var t,a,o=[],i=!0,u=!1;try{for(n=n.call(r);!(i=(t=n.next()).done)&&(o.push(t.value),!e||o.length!==e);i=!0);}catch(c){u=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(u)throw a}}return o}}(r,e)||s(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(r){return function(r){if(Array.isArray(r))return u(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||s(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(r,e){if(r){if("string"===typeof r)return u(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);return"Object"===n&&r.constructor&&(n=r.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(r,e):void 0}}e.Z=function(){var r=c(t.useState([]),2),e=r[0],n=r[1],u=(0,o.Z)({asyncCallback:a.Z}),s=u.isInit,f=u.isLoading,m=u.error,d=u.recall,v=u.result,p=t.useCallback((function(r){if(!r.errors){var t=r.new;t&&n(l(e).concat([t]))}}),[e]),h=t.useCallback((function(r){var t;if(!r.errors){var a=null===(t=r.old)||void 0===t?void 0:t.id;if(a&&!(a<=0)){var o=r.new;if(o){var i=e.map((function(r){return r.id===a?o:r}));n(i)}}}}),[e]),y=t.useCallback((function(r){var t;if(!r.errors){var a=null===(t=r.old)||void 0===t?void 0:t.id;a&&(a<=0||n(e.filter((function(r){return r.id!==a}))))}}),[e]);return(0,i.Z)({path:"restaurants",insertCallback:p,updateCallback:h,deleteCallback:y}),t.useEffect((function(){n(v||[])}),[v]),{isInit:s,isLoading:f,error:m,recall:d,restaurants:e}}},1676:function(r,e,n){"use strict";n.d(e,{Z:function(){return f}});var t=n(7294),a=n(4051),o=n.n(a),i=n(3298);function u(r,e,n,t,a,o,i){try{var u=r[o](i),c=u.value}catch(l){return void n(l)}u.done?e(c):Promise.resolve(c).then(t,a)}function c(r){return function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(r){u(o,t,a,i,c,"next",r)}function c(r){u(o,t,a,i,c,"throw",r)}i(void 0)}))}}var l=function(){var r=c(o().mark((function r(){var e,n,t,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.O.storage.from("menus").list("restaurant");case 2:if(e=r.sent,n=e.data,!(t=e.error)){r.next=7;break}throw t;case 7:if(n){r.next=9;break}throw new Error("no menus");case 9:return r.next=11,Promise.all(n.map(function(){var r=c(o().mark((function r(e){var n,t,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.name){r.next=2;break}throw new Error("no menu name");case 2:return r.next=4,i.O.storage.from("menus").getPublicUrl("restaurant/"+e.name);case 4:if(n=r.sent,t=n.data,!(a=n.error)){r.next=9;break}throw a;case 9:if(t){r.next=11;break}throw new Error("no publicUrl");case 11:return r.abrupt("return",{id:e.id,name:e.name,publicURL:t.publicURL});case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()));case 11:return a=r.sent,r.abrupt("return",a);case 13:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),s=n(301),f=function(){var r=(0,s.Z)({asyncCallback:l,customErrorCallback:function(){return new Error("Custom")}}),e=r.isInit,n=r.isLoading,a=r.error,o=r.result,i=r.recall;return{isInit:e,isLoading:n,error:a,storageMenus:t.useMemo((function(){return o||[]}),[o]),recall:i}}},9664:function(r,e,n){"use strict";var t=n(7294),a=n(3298),o=n(1622);e.Z=function(r){var e=r.path,n=r.insertCallback,i=void 0===n?o.G1:n,u=r.updateCallback,c=void 0===u?o.G1:u,l=r.deleteCallback,s=void 0===l?o.G1:l;return t.useEffect((function(){var r=a.O.from(e).on("INSERT",i).on("UPDATE",c).on("DELETE",s).subscribe();return function(){a.O.removeSubscription(r)}}),[e,i,c,s]),{}}}},function(r){r.O(0,[240,345,177,528,945,411,992,213,774,888,179],(function(){return e=2388,r(r.s=e);var e}));var e=r.O();_N_E=e}]);