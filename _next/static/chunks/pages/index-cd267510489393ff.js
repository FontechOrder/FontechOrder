(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(r,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(441)}])},2648:function(r,t,n){"use strict";var e=n(5893),o=(n(7294),n(6242)),i=n(4229);t.Z=function(r){var t=r.children;return(0,e.jsx)(o.Z,{header:(0,e.jsx)(i.Z,{}),children:t})}},6207:function(r,t,n){"use strict";n.d(t,{Z:function(){return S}});var e=n(5893),o=n(7294),i=n(6822),a=n(6476),u=n(7773),c=n(6903),l=n(9664),s=n(4051),d=n.n(s),f=n(2420),v=n(3019),h=n(1622),p=n(8430),b=function(r){return{type:p.Z.SAVE_ORDER_LIST,orderList:r}},y=function(){return{orderList:(0,f.v9)((function(r){return{orderList:r.orderListManagerState.orderList}}),f.wU).orderList}};function m(r,t,n,e,o,i,a){try{var u=r[i](a),c=u.value}catch(l){return void n(l)}u.done?t(c):Promise.resolve(c).then(e,o)}var C=function(){var r=(0,f.I0)(),t=y().orderList;return{doFetchOrderListWithCallback:o.useCallback((function(t){(function(){var n,e=(n=d().mark((function n(){var e;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,v.Z)();case 3:e=n.sent,r(b(e)),null===t||void 0===t||t(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),null===t||void 0===t||t((0,h.iJ)(n.t0)||h.S2);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})),function(){var r=this,t=arguments;return new Promise((function(e,o){var i=n.apply(r,t);function a(r){m(i,e,o,a,u,"next",r)}function u(r){m(i,e,o,a,u,"throw",r)}a(void 0)}))});return function(){return e.apply(this,arguments)}})()()}),[r]),doSaveOrderList:o.useCallback((function(t){r(b(t))}),[r]),doClearOrderList:o.useCallback((function(){r({type:p.Z.CLEAR_ORDER_LIST})}),[r]),orderList:t}};function k(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function w(r){return function(r){if(Array.isArray(r))return k(r)}(r)||function(r){if("undefined"!==typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function(r,t){if(!r)return;if("string"===typeof r)return k(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(r,t)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=function(){var r=C(),t=r.doFetchOrderListWithCallback,n=r.doSaveOrderList,e=r.doClearOrderList,i=r.orderList,a=o.useCallback((function(r){if(!r.errors){var t=r.new;t&&n(w(i).concat([t]))}}),[n,i]),u=o.useCallback((function(r){var t;if(!r.errors){var e=null===(t=r.old)||void 0===t?void 0:t.id;if(e&&!(e<=0)){var o=r.new;if(o){var a=i.map((function(r){return r.id===e?o:r}));n(a)}}}}),[n,i]),c=o.useCallback((function(r){var t;if(!r.errors){var e=null===(t=r.old)||void 0===t?void 0:t.id;e&&(e<=0||n(i.filter((function(r){return r.id!==e}))))}}),[n,i]);return(0,l.Z)({path:"orders",insertCallback:a,updateCallback:u,deleteCallback:c}),{doFetchOrderListWithCallback:t,doClearOrderList:e,orderList:i}};function O(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function x(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var n=null==r?null:"undefined"!==typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=n){var e,o,i=[],a=!0,u=!1;try{for(n=n.call(r);!(a=(e=n.next()).done)&&(i.push(e.value),!t||i.length!==t);a=!0);}catch(c){u=!0,o=c}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(r,t)||function(r,t){if(!r)return;if("string"===typeof r)return O(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=function(){var r=x(o.useState(!0),2),t=r[0],n=r[1],l=x(o.useState(!1),2),s=l[0],d=l[1],f=L(),v=f.doClearOrderList,h=f.doFetchOrderListWithCallback,p=f.orderList,b=o.useMemo((function(){return p.map((function(r){return{title:r.date_text,start:r.date_text+"T00:00:00+08:00",backgroundColor:r.finish?"red":"",borderColor:r.finish?"red":"",extendedProps:{order:r},url:r.finish?"":"".concat("/FontechOrder","/orders/detail?id=").concat(r.id)}}))}),[p]),y=o.useCallback((function(){s||(d(!0),h((function(r){r&&console.log("doFetchOrderListWithCallback err:",r.message),console.log("doFetchOrderListWithCallback"),d(!1)})))}),[s,h]),m=o.useMemo((function(){return{text:s?"Loading":"D.C.",click:y}}),[s,y]);return o.useEffect((function(){t&&(n(!1),v(),y())}),[t,y,v]),(0,e.jsx)(i.Z,{m:2,children:(0,e.jsx)(a.ZPm,{locale:"zh-tw",defaultAllDay:!0,allDayText:"menu",contentHeight:"auto",customButtons:{reloadButton:m},plugins:[u.ZP,c.Z],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today reloadButton",center:"title",right:"dayGridMonth,listMonth"},views:{dayGridMonth:{},listMonth:{buttonText:"list month"}},events:b})})}},441:function(r,t,n){"use strict";n.r(t);var e=n(5893),o=(n(7294),n(2648)),i=n(6207);t.default=function(){return(0,e.jsx)(o.Z,{children:(0,e.jsx)(i.Z,{})})}},3019:function(r,t,n){"use strict";var e=n(4051),o=n.n(e),i=n(3298);function a(r,t,n,e,o,i,a){try{var u=r[i](a),c=u.value}catch(l){return void n(l)}u.done?t(c):Promise.resolve(c).then(e,o)}var u=function(){var r,t=(r=o().mark((function r(){var t,n,e;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.O.from("orders").select();case 2:if(t=r.sent,n=t.data,!(e=t.error)){r.next=7;break}throw e;case 7:if(n){r.next=9;break}throw new Error("no order list");case 9:return r.abrupt("return",n);case 10:case"end":return r.stop()}}),r)})),function(){var t=this,n=arguments;return new Promise((function(e,o){var i=r.apply(t,n);function u(r){a(i,e,o,u,c,"next",r)}function c(r){a(i,e,o,u,c,"throw",r)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();t.Z=u},9664:function(r,t,n){"use strict";var e=n(7294),o=n(3298),i=n(1622);t.Z=function(r){var t=r.path,n=r.insertCallback,a=void 0===n?i.G1:n,u=r.updateCallback,c=void 0===u?i.G1:u,l=r.deleteCallback,s=void 0===l?i.G1:l;return e.useEffect((function(){var r=o.O.from(t).on("INSERT",a).on("UPDATE",c).on("DELETE",s).subscribe();return function(){o.O.removeSubscription(r)}}),[t,a,c,s]),{}}}},function(r){r.O(0,[870,240,345,808,213,774,888,179],(function(){return t=5301,r(r.s=t);var t}));var t=r.O();_N_E=t}]);